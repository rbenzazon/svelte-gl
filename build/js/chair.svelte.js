import{S as a,i as t,s,M as i,e,a as r,c as o,b as n,m as c,n as l,t as m,d as f,f as h,g as p,h as u,o as d,r as g,l as y,j as w,k as j,p as x,A as b,B as M,C as $,D,H as E,E as v,F as C,G as k}from"./engine.js";import{c as I}from"./texture.js";import{l as A}from"./rgbe-loader.js";import{l as B,m as F,i as G,b as H}from"./gltf-loader.js";import{i as L}from"./dracoDecoder.js";import{c as S}from"./specular.js";function q(a){let t,s,u,d;return u=new i({}),{c(){t=e("canvas"),s=r(),o(u.$$.fragment)},m(i,e){n(i,t,e),a[1](t),n(i,s,e),c(u,i,e),d=!0},p:l,i(a){d||(m(u.$$.fragment,a),d=!0)},o(a){f(u.$$.fragment,a),d=!1},d(i){i&&(h(t),h(s)),a[1](null),p(u,i)}}}function z(){}function J(a,t,s){let i,e,r,o,n,c;return u(a,g,(a=>s(2,i=a))),u(a,y,(a=>s(3,e=a))),u(a,w,(a=>s(4,r=a))),u(a,j,(a=>s(5,o=a))),u(a,x,(a=>s(6,n=a))),d((async()=>{b(g,i={...i,canvas:c,backgroundColor:M,ambientLightColor:[16777215,.15]},i);const a=await L("draco/"),t=await B("models/arm-chair.gltf","models/arm-chair.bin",a),s=F(t.scene).filter(G),l=H(t,s[0]),m=H(t,s[1]);b(x,n={...n,position:[2,1.5,2],target:[0,.5,0],fov:60},n),$(D({position:[-2,3,3],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),$(D({position:[2,-1,1],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),$(D({position:[-1,3,-4],color:[1,1,1],intensity:10,cutoffDistance:0,decayExponent:2}));const f=await I({url:"textures/arm-chair-diffuse.jpg",type:"diffuse"}),h=await I({url:"textures/arm-chair-normal.jpg",type:"normal"}),p=await A("textures/arm-chair-lightmap.hdr"),u=await I({image:p.data,width:p.width,height:p.height,lightMapIntensity:1.8,type:"light"}),d=E({diffuse:[1,1,1],diffuseMap:f,normalMap:h,lightMap:u,metalness:0,specular:S({roughness:.9,ior:1.5,intensity:1,color:[1,1,1]})}),k=await A("textures/arm-chair-floor-lightmap.hdr"),q=await I({image:k.data,width:k.width,height:k.height,lightMapIntensity:1.8,type:"light"}),J=E({diffuse:[1,1,1],metalness:0,lightMap:q,specular:S({roughness:.9,ior:1.5,intensity:1,color:[1,1,1]})});b(j,o=[...o,d,J],o),b(w,r=[...r,v({...m,material:d}),v({...l,material:J})],r),b(y,e=[...e],e),b(g,i={...i,loop:z,enabled:!0},i),C(c,x)})),[c,function(a){k[a?"unshift":"push"]((()=>{c=a,s(0,c)}))}]}new class extends a{constructor(a){super(),t(this,a,J,q,s,{})}}({target:document.body});
