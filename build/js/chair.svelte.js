import{S as t,i as a,s,M as e,e as i,a as r,c as o,b as n,m as c,n as l,t as f,d as u,f as p,g as m,h,o as d,r as g,l as y,j as w,k as x,p as j,A as b,B as M,C as $,D,H as E,E as v,F as B,G as C}from"./engine.js";import{c as k}from"./texture.js";import{l as I,m as A,i as F,b as G}from"./gltf-loader.js";import{i as H}from"./dracoDecoder.js";import{c as L}from"./specular.js";import{d as S}from"./jpeg-hdr-loader.js";function q(t){let a,s,h,d;return h=new e({}),{c(){a=i("canvas"),s=r(),o(h.$$.fragment)},m(e,i){n(e,a,i),t[1](a),n(e,s,i),c(h,e,i),d=!0},p:l,i(t){d||(f(h.$$.fragment,t),d=!0)},o(t){u(h.$$.fragment,t),d=!1},d(e){e&&(p(a),p(s)),t[1](null),m(h,e)}}}function z(){}function J(t,a,s){let e,i,r,o,n,c;return h(t,g,(t=>s(2,e=t))),h(t,y,(t=>s(3,i=t))),h(t,w,(t=>s(4,r=t))),h(t,x,(t=>s(5,o=t))),h(t,j,(t=>s(6,n=t))),d((async()=>{b(g,e={...e,canvas:c,backgroundColor:M,ambientLightColor:[16777215,.15]},e);const t=await H("draco/"),a=await I("models/arm-chair.gltf","models/arm-chair.bin",t),s=A(a.scene).filter(F),l=G(a,s[0]),f=G(a,s[1]);b(j,n={...n,position:[2,1.5,2],target:[0,.5,0],fov:60},n),$(D({position:[-2,3,3],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),$(D({position:[2,-1,1],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),$(D({position:[-1,3,-4],color:[1,1,1],intensity:10,cutoffDistance:0,decayExponent:2}));const u=await k({url:"textures/arm-chair-diffuse.jpg",type:"diffuse"}),p=await k({url:"textures/arm-chair-normal.jpg",type:"normal"}),m=await S("textures/arm-chair-lightmap-hdr.jpg"),h=await k({textureBuffer:()=>m.texture,width:m.width,height:m.height,lightMapIntensity:1.8,type:"light"}),d=E({diffuse:[1,1,1],diffuseMap:u,normalMap:p,lightMap:h,metalness:0,specular:L({roughness:.9,ior:1.5,intensity:1,color:[1,1,1]})}),C=await S("textures/arm-chair-floor-lightmap-hdr.jpg"),q=await k({textureBuffer:()=>C.texture,width:C.width,height:C.height,lightMapIntensity:1.8,type:"light"}),J=E({diffuse:[1,1,1],metalness:0,lightMap:q,specular:L({roughness:.9,ior:1.5,intensity:1,color:[1,1,1]})});b(x,o=[...o,d,J],o),b(w,r=[...r,v({...f,material:d}),v({...l,material:J})],r),b(y,i=[...i],i),b(g,e={...e,loop:z,enabled:!0},e),B(c,j)})),[c,function(t){C[t?"unshift":"push"]((()=>{c=t,s(0,c)}))}]}new class extends t{constructor(t){super(),a(this,t,J,q,s,{})}}({target:document.body});
