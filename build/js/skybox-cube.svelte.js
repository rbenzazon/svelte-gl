import{at as a,Z as r,_ as t,a0 as s,a1 as n,a4 as e,au as o,U as i,T as l,R as c,S as m,i as f,s as u,M as p,e as g,a as v,c as d,b as h,m as x,n as y,t as b,d as w,f as C,g as A,h as M,o as P,r as $,l as j,k,p as E,q as F,j as D,u as S,v as T,C as I,D as N,x as R,y as U,A as _,E as q,I as H,w as L}from"./engine.js";import{c as O,s as V}from"./skybox.js";import{c as Z}from"./cube.js";function z(){const{gl:a,program:r}=l,t=e(o,{instances:!1,declarations:"",positionModifier:""})({instances:!1,declarations:"",positionModifier:""});i(a,r,t,"#version 300 es\r\nprecision mediump float;\r\n\r\n#define SHADER_NAME basicFragment\r\n\r\n// Input from vertex shader\r\nin vec3 vertexColor;\r\nin vec3 vNormal;\r\nin vec3 vertex;\r\nin vec3 vViewPosition;\r\nin highp vec2 vUv;\r\n\r\n// Output color\r\nout vec4 fragColor;\r\n\r\nvoid main() {\r\n    // Simply use the vertex color for the fragment color\r\n    // This will create a simple colored line with no lighting effects\r\n    fragColor = vec4(vertexColor, 1.0);\r\n    \r\n    // Alternative: if you want slightly smoother lines with anti-aliasing\r\n    // float intensity = 1.0;\r\n    // fragColor = vec4(vertexColor * intensity, 1.0);\r\n}")}function B(a){let r,t,s,n;return s=new p({}),{c(){r=g("canvas"),t=v(),d(s.$$.fragment)},m(e,o){h(e,r,o),a[1](r),h(e,t,o),x(s,e,o),n=!0},p:y,i(a){n||(b(s.$$.fragment,a),n=!0)},o(a){w(s.$$.fragment,a),n=!1},d(n){n&&(C(r),C(t)),a[1](null),A(s,n)}}}function G(){}function J(e,o,i){let l,m,f,u,p,g,v;return M(e,$,(a=>i(2,l=a))),M(e,j,(a=>i(3,m=a))),M(e,k,(a=>i(4,f=a))),M(e,E,(a=>i(5,u=a))),M(e,F,(a=>i(6,p=a))),M(e,D,(a=>i(7,g=a))),P((async()=>{S($,l={...l,canvas:v,backgroundColor:T,ambientLightColor:[16777215,.1]},l),S(D,g={...g,position:[0,2,-5],target:[0,0,0],fov:75},g);const e=await O({url:"skybox-flamingo-tonemapped.png",convertToCube:V});S(F,p=[e],p);const o=Z(),i=I(N({position:[-2,2,-2],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),d=R(U()),h=L({diffuse:[1,0,0],metalness:0,program:{createProgram:a,setupProgram:[z,r,t],setupMaterial:[],useProgram:s,selectProgram:n,updateProgram:[]}}),x=function(a){const{normals:r,positions:t}=a.attributes,s="Float32Array"!=typeof t&&"data"in t?t.data:t,n="Float32Array"!=typeof r&&"data"in r?r.data:r,e=[];for(let a=0;a<s.length;a+=3)e.push(s[a],s[a+1],s[a+2]),e.push(s[a]+.2*n[a],s[a+1]+.2*n[a+1],s[a+2]+.2*n[a+2]);return{attributes:{positions:new Float32Array(e)},matrix:a.matrix.value,material:a.material,drawMode:c[1]}}({...o,matrix:d,material:h}),y=L({diffuse:[1,.5,.5],metalness:0});S(E,u=[...u,y,h],u),S(k,f=[...f,_({...o,matrix:d,material:y}),_(x)],f),S(j,m=[...m,i],m),S($,l={...l,loop:G,enabled:!0},l),q(v,D)})),[v,function(a){H[a?"unshift":"push"]((()=>{v=a,i(0,v)}))}]}class K extends m{constructor(a){super(),f(this,a,J,B,u,{})}}export{K as default};
