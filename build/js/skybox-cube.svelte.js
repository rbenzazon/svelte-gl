import{R as a,at as s,Z as n,_ as t,a0 as o,a1 as e,a4 as r,au as i,U as c,T as m,S as l,i as u,s as f,M as p,e as d,a as g,c as v,b,m as y,n as x,t as h,d as C,f as w,g as A,h as M,o as P,r as $,l as k,j as F,k as j,q as E,p as D,A as H,B as N,C as R,D as S,y as T,z as U,E as _,F as q,G as z,H as B}from"./engine.js";import{c as G,s as L}from"./skybox.js";import{c as V}from"./cube.js";function Z(){const{gl:a,program:s}=m,n=r(i,{instances:!1,declarations:"",positionModifier:"",uv1:!1})({instances:!1,declarations:"",positionModifier:""});c(a,s,n,"#version 300 es\r\nprecision mediump float;\n\n#define SHADER_NAME basicFragment\n\nin vec3 vertexColor;\r\nin vec3 vNormal;\r\nin vec3 vertex;\r\nin vec3 vViewPosition;\r\nin highp vec2 vUv;\n\nout vec4 fragColor;\n\nvoid main() {\r\n    \n    \n    fragColor = vec4(vertexColor, 1.0);\r\n    \r\n    \n    \n    \n}")}function I(a){let s,n,t,o;return t=new p({}),{c(){s=d("canvas"),n=g(),v(t.$$.fragment)},m(e,r){b(e,s,r),a[1](s),b(e,n,r),y(t,e,r),o=!0},p:x,i(a){o||(h(t.$$.fragment,a),o=!0)},o(a){C(t.$$.fragment,a),o=!1},d(o){o&&(w(s),w(n)),a[1](null),A(t,o)}}}function J(){}function K(r,i,c){let m,l,u,f,p,d,g;return M(r,$,(a=>c(2,m=a))),M(r,k,(a=>c(3,l=a))),M(r,F,(a=>c(4,u=a))),M(r,j,(a=>c(5,f=a))),M(r,E,(a=>c(6,p=a))),M(r,D,(a=>c(7,d=a))),P((async()=>{H($,m={...m,canvas:g,backgroundColor:N,ambientLightColor:[16777215,.1]},m),H(D,d={...d,position:[0,2,-5],target:[0,0,0],fov:75},d);const r=await G({url:"skyboxes/skybox-flamingo-tonemapped.png",convertToCube:L});H(E,p=[r],p);const i=V(),c=R(S({position:[-2,2,-2],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),v=T(U()),b=B({diffuse:[1,0,0],metalness:0,program:{createProgram:s,setupProgram:[Z,n,t],setupMaterial:[],useProgram:o,selectProgram:e,updateProgram:[]}}),y=function(s){const{normals:n,positions:t}=s.attributes,o="Float32Array"!=typeof t&&"data"in t?t.data:t,e="Float32Array"!=typeof n&&"data"in n?n.data:n,r=[];for(let a=0;a<o.length;a+=3)r.push(o[a],o[a+1],o[a+2]),r.push(o[a]+.2*e[a],o[a+1]+.2*e[a+1],o[a+2]+.2*e[a+2]);return{attributes:{positions:new Float32Array(r)},matrix:s.matrix.value,material:s.material,drawMode:a[1]}}({...i,matrix:v,material:b}),x=B({diffuse:[1,.5,.5],metalness:0});H(j,f=[...f,x,b],f),H(F,u=[...u,_({...i,matrix:v,material:x}),_(y)],u),H(k,l=[...l,c],l),H($,m={...m,loop:J,enabled:!0},m),q(g,D)})),[g,function(a){z[a?"unshift":"push"]((()=>{g=a,c(0,g)}))}]}new class extends l{constructor(a){super(),u(this,a,K,I,f,{})}}({target:document.body});
