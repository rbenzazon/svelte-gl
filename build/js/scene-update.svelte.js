import{S as a,i as e,s as t,a6 as s,M as n,e as o,a as r,c as i,a7 as c,b as l,m,a8 as u,n as p,t as f,d,f as g,g as h,a9 as v,h as w,o as b,j as x,W as y,r as $,l as j,k as M,y as C,z as D,A as k,B as A,x as E,X as F,C as z,D as B,Z as L,v as P,w as S,E as W}from"./Menu-z2xJb2L1.js";import{c as X}from"./cube-BUu5McRL.js";import{c as Z}from"./plane-CJx9FycI.js";import{c as q}from"./texture-B3n45YCS.js";import{c as G}from"./specular-cyCsHvEg.js";import{D as H}from"./DebugPanel-DxkU_Q31.js";function I(a){s(a,"svelte-8du7ma","button.svelte-8du7ma{position:absolute;left:0}button.add.svelte-8du7ma{top:100px}button.remove.svelte-8du7ma{top:200px}")}function J(a){let e,t,s,w,b,x,y,$,j,M,C,D;return s=new n({}),b=new H({}),{c(){e=o("canvas"),t=r(),i(s.$$.fragment),w=r(),i(b.$$.fragment),x=r(),y=o("button"),y.textContent="add mesh",$=r(),j=o("button"),j.textContent="remove mesh",c(y,"class","add svelte-8du7ma"),c(j,"class","remove svelte-8du7ma")},m(n,o){l(n,e,o),a[3](e),l(n,t,o),m(s,n,o),l(n,w,o),m(b,n,o),l(n,x,o),l(n,y,o),l(n,$,o),l(n,j,o),M=!0,C||(D=[u(y,"click",a[1]),u(j,"click",a[2])],C=!0)},p:p,i(a){M||(f(s.$$.fragment,a),f(b.$$.fragment,a),M=!0)},o(a){d(s.$$.fragment,a),d(b.$$.fragment,a),M=!1},d(n){n&&(g(e),g(t),g(w),g(x),g(y),g($),g(j)),a[3](null),h(s,n),h(b,n),C=!1,v(D)}}}function K(a,e,t){let s,n,o,r,i,c,l,m;function u(){l.set({...L(l),position:[3*Math.sin(performance.now()/1e3),1,3*Math.cos(performance.now()/1e3)]});const a=.5*Math.sin(performance.now()/1e3)+.5,e=.5*Math.sin(performance.now()/1e3+2)+.5,t=.5*Math.sin(performance.now()/1e3+4)+.5;m.set({...L(m),color:[a,e,t]})}w(a,x,(a=>t(7,s=a))),w(a,y,(a=>t(8,n=a))),w(a,$,(a=>t(9,o=a))),w(a,j,(a=>t(10,r=a))),w(a,M,(a=>t(11,i=a))),b((async()=>{C($,o={...o,canvas:c,backgroundColor:D,ambientLightColor:[16777215,.1]},o),C(M,i={position:[0,5,-5],target:[0,1,0],fov:75},i),l=k(A({position:[0,1,0],color:[1,1,1],intensity:2,cutoffDistance:3,decayExponent:0})),m=k(A({position:[0,1,0],color:[1,1,1],intensity:5,cutoffDistance:10,decayExponent:0}));const a=Z(10,10,1,1),e=E(new Float32Array(16)),t=await q({url:"peeling-painted-metal-diffuse.jpg",type:"diffuse"}),p=await q({url:"peeling-painted-metal-normal.jpg",type:"normal"}),f=await q({url:"peeling-painted-metal-roughness.jpg",type:"roughness"}),d=F({diffuse:[1,1,1],metalness:0,specular:G({roughness:.8,ior:1.4,intensity:.5,color:[1,1,1]}),diffuseMap:t,normalMap:p,roughnessMap:f});C(y,n=[...n,d],n),C(x,s=[...s,z({...a,matrix:e,material:d})],s),C(j,r=[...r,l,m],r),C($,o={...o,loop:u,enabled:!0},o),B(c,M)}));let p=1;return[c,function(){const a=E(new Float32Array(16));P(a,a,[.2,.2,.2]),S(a,a,[0,4*p+1,0]);const e=z({...X(),matrix:a,material:n[0]});C(x,s=[...s,e],s),p++},function(){C(x,s=s.slice(0,-1),s),p--},function(a){W[a?"unshift":"push"]((()=>{c=a,t(0,c)}))}]}class N extends a{constructor(a){super(),e(this,a,K,J,t,{},I)}}export{N as default};
