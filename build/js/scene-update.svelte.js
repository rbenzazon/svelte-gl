import{S as a,i as e,s as t,a5 as s,M as n,e as o,a as r,c as i,a6 as c,b as m,m as u,a7 as l,n as p,t as f,d,f as g,g as h,a8 as x,h as b,o as v,j as w,k as $,r as y,l as j,p as M,A as C,B as D,C as k,D as E,y as z,z as A,H as B,E as F,F as G,J as H,w as J,x as L,G as P}from"./engine.js";import{c as S}from"./cube.js";import{c as q}from"./plane.js";import{c as I}from"./texture.js";import{c as K}from"./specular.js";import{D as N}from"./DebugPanel.js";function O(a){s(a,"svelte-8du7ma","button.svelte-8du7ma{position:absolute;left:0}button.add.svelte-8du7ma{top:100px}button.remove.svelte-8du7ma{top:200px}")}function Q(a){let e,t,s,b,v,w,$,y,j,M,C,D;return s=new n({}),v=new N({}),{c(){e=o("canvas"),t=r(),i(s.$$.fragment),b=r(),i(v.$$.fragment),w=r(),$=o("button"),$.textContent="add mesh",y=r(),j=o("button"),j.textContent="remove mesh",c($,"class","add svelte-8du7ma"),c(j,"class","remove svelte-8du7ma")},m(n,o){m(n,e,o),a[3](e),m(n,t,o),u(s,n,o),m(n,b,o),u(v,n,o),m(n,w,o),m(n,$,o),m(n,y,o),m(n,j,o),M=!0,C||(D=[l($,"click",a[1]),l(j,"click",a[2])],C=!0)},p:p,i(a){M||(f(s.$$.fragment,a),f(v.$$.fragment,a),M=!0)},o(a){d(s.$$.fragment,a),d(v.$$.fragment,a),M=!1},d(n){n&&(g(e),g(t),g(b),g(w),g($),g(y),g(j)),a[3](null),h(s,n),h(v,n),C=!1,x(D)}}}function R(a,e,t){let s,n,o,r,i,c,m,u;function l(){m.set({...H(m),position:[3*Math.sin(performance.now()/1e3),2,3*Math.cos(performance.now()/1e3)]});const a=.5*Math.sin(performance.now()/1e3)+.5,e=.5*Math.sin(performance.now()/1e3+2)+.5,t=.5*Math.sin(performance.now()/1e3+4)+.5;u.set({...H(u),color:[a,e,t]})}b(a,w,(a=>t(7,s=a))),b(a,$,(a=>t(8,n=a))),b(a,y,(a=>t(9,o=a))),b(a,j,(a=>t(10,r=a))),b(a,M,(a=>t(11,i=a))),v((async()=>{C(y,o={...o,canvas:c,backgroundColor:D,ambientLightColor:[16777215,.1]},o),C(M,i={...i,position:[0,5,-5],target:[0,1,0],fov:75},i),m=k(E({position:[0,1,0],color:[1,1,1],intensity:5,cutoffDistance:15,decayExponent:.75})),u=k(E({position:[0,1,0],color:[1,1,1],intensity:5,cutoffDistance:10,decayExponent:0}));const a=q(10,10,1,1),e=z(A()),t=await I({url:"textures/peeling-painted-metal-diffuse.jpg",type:"diffuse"}),p=await I({url:"textures/peeling-painted-metal-normal.jpg",type:"normal"}),f=await I({url:"textures/peeling-painted-metal-roughness.jpg",type:"roughness"}),d=B({diffuse:[1,1,1],metalness:0,specular:K({roughness:.8,ior:1.4,intensity:.5,color:[1,1,1]}),diffuseMap:t,normalMap:p,roughnessMap:f});C($,n=[...n,d],n),C(w,s=[...s,F({...a,matrix:e,material:d})],s),C(j,r=[...r,m,u],r),C(y,o={...o,loop:l,enabled:!0},o),G(c,M)}));let p=1;return[c,function(){const a=z(A());J(a,a,[.2,.2,.2]),L(a,a,[0,4*p+1,0]);const e=F({...S(),matrix:a,material:n[0]});C(w,s=[...s,e],s),p++},function(){C(w,s=s.slice(0,-1),s),p--},function(a){P[a?"unshift":"push"]((()=>{c=a,t(0,c)}))}]}new class extends a{constructor(a){super(),e(this,a,R,Q,t,{},O)}}({target:document.body});
