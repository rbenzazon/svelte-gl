import{S as a,i as e,s,a7 as t,M as n,e as o,a as r,c as i,a8 as c,b as l,m,a9 as u,n as p,t as f,d,f as g,g as h,aa as v,h as b,o as x,j as $,k as w,r as j,l as y,p as M,q as C,u as D,y as k,z as E,v as q,w as z,E as A,A as B,B as L,R as P,C as R,x as S,D as F}from"./engine-CfSrEngR.js";import{c as G}from"./cube-BbLezRXc.js";import{c as H}from"./plane-BeisbDud.js";import{c as I}from"./texture-3VWbGOMU.js";import{c as J}from"./specular-DZzjg2qv.js";import{D as K}from"./DebugPanel-BwKMlH7O.js";function N(a){t(a,"svelte-8du7ma","button.svelte-8du7ma{position:absolute;left:0}button.add.svelte-8du7ma{top:100px}button.remove.svelte-8du7ma{top:200px}")}function O(a){let e,s,t,b,x,$,w,j,y,M,C,D;return t=new n({}),x=new K({}),{c(){e=o("canvas"),s=r(),i(t.$$.fragment),b=r(),i(x.$$.fragment),$=r(),w=o("button"),w.textContent="add mesh",j=r(),y=o("button"),y.textContent="remove mesh",c(w,"class","add svelte-8du7ma"),c(y,"class","remove svelte-8du7ma")},m(n,o){l(n,e,o),a[3](e),l(n,s,o),m(t,n,o),l(n,b,o),m(x,n,o),l(n,$,o),l(n,w,o),l(n,j,o),l(n,y,o),M=!0,C||(D=[u(w,"click",a[1]),u(y,"click",a[2])],C=!0)},p:p,i(a){M||(f(t.$$.fragment,a),f(x.$$.fragment,a),M=!0)},o(a){d(t.$$.fragment,a),d(x.$$.fragment,a),M=!1},d(n){n&&(g(e),g(s),g(b),g($),g(w),g(j),g(y)),a[3](null),h(t,n),h(x,n),C=!1,v(D)}}}function Q(a,e,s){let t,n,o,r,i,c,l,m;function u(){l.set({...P(l),position:[3*Math.sin(performance.now()/1e3),2,3*Math.cos(performance.now()/1e3)]});const a=.5*Math.sin(performance.now()/1e3)+.5,e=.5*Math.sin(performance.now()/1e3+2)+.5,s=.5*Math.sin(performance.now()/1e3+4)+.5;m.set({...P(m),color:[a,e,s]})}b(a,$,(a=>s(7,t=a))),b(a,w,(a=>s(8,n=a))),b(a,j,(a=>s(9,o=a))),b(a,y,(a=>s(10,r=a))),b(a,M,(a=>s(11,i=a))),x((async()=>{C(j,o={...o,canvas:c,backgroundColor:D,ambientLightColor:[16777215,.1]},o),C(M,i={...i,position:[0,5,-5],target:[0,1,0],fov:75},i),l=k(E({position:[0,1,0],color:[1,1,1],intensity:5,cutoffDistance:15,decayExponent:.75})),m=k(E({position:[0,1,0],color:[1,1,1],intensity:5,cutoffDistance:10,decayExponent:0}));const a=H(10,10,1,1),e=q(z()),s=await I({url:"peeling-painted-metal-diffuse.jpg",type:"diffuse"}),p=await I({url:"peeling-painted-metal-normal.jpg",type:"normal"}),f=await I({url:"peeling-painted-metal-roughness.jpg",type:"roughness"}),d=A({diffuse:[1,1,1],metalness:0,specular:J({roughness:.8,ior:1.4,intensity:.5,color:[1,1,1]}),diffuseMap:s,normalMap:p,roughnessMap:f});C(w,n=[...n,d],n),C($,t=[...t,B({...a,matrix:e,material:d})],t),C(y,r=[...r,l,m],r),C(j,o={...o,loop:u,enabled:!0},o),L(c,M)}));let p=1;return[c,function(){const a=q(z());R(a,a,[.2,.2,.2]),S(a,a,[0,4*p+1,0]);const e=B({...G(),matrix:a,material:n[0]});C($,t=[...t,e],t),p++},function(){C($,t=t.slice(0,-1),t),p--},function(a){F[a?"unshift":"push"]((()=>{c=a,s(0,c)}))}]}class T extends a{constructor(a){super(),e(this,a,Q,O,s,{},N)}}export{T as default};
