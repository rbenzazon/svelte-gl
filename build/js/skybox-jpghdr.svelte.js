import{S as s,i as a,s as t,M as e,e as o,a as n,c as r,b as i,m as c,n as u,t as h,d as p,f as m,g as d,h as f,o as g,r as l,j as x,k as b,q as j,p as w,A as y,B as v,C as M,D as $,y as k,z as C,H as z,E as D,F as E,G as S}from"./engine.js";import{c as T}from"./skybox.js";import{c as q,a as A}from"./polyhedron.js";import{d as B}from"./jpeg-hdr-loader.js";import{g as F,h as G,a as H,b as L}from"./environment-map-texture.js";import{c as I}from"./specular.js";function J(s){let a,t,f,g;return f=new e({}),{c(){a=o("canvas"),t=n(),r(f.$$.fragment)},m(e,o){i(e,a,o),s[1](a),i(e,t,o),c(f,e,o),g=!0},p:u,i(s){g||(h(f.$$.fragment,s),g=!0)},o(s){p(f.$$.fragment,s),g=!1},d(e){e&&(m(a),m(t)),s[1](null),d(f,e)}}}function K(){}function N(s,a,t){let e,o,n,r,i,c,u;return f(s,l,(s=>t(3,e=s))),f(s,x,(s=>t(4,o=s))),f(s,b,(s=>t(5,n=s))),f(s,j,(s=>t(6,r=s))),f(s,w,(s=>t(7,i=s))),g((async()=>{y(l,e={...e,canvas:c,backgroundColor:v,ambientLightColor:[16777215,.1]},e),y(w,i={...i,position:[0,0,10],target:[0,0,0],fov:50},i),u=await B("skyboxes/spruit-sunrise-8k-hdr.jpg");const s=F(1),a=await T({texture:u.texture,width:u.texture.width,height:u.texture.height,cubeSize:2048,toneMapping:s,convertToCube:G}),t=H(u.texture,u.width,u.height);y(j,r=[a,t],r);const h=q(2,6,A);M($({position:[-2,2,-2],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2}));const p=k(C()),m=L({envMap:t.getTexture,width:t.width,height:t.height,lodMax:t.lodMax}),d=z({diffuse:[1,1,1],metalness:1,specular:I({roughness:.05,ior:1.5,intensity:1,color:[1,1,1]}),envMap:m});y(b,n=[...n,d],n),y(x,o=[...o,D({...h,matrix:p,material:d})],o),y(l,e={...e,loop:K,enabled:!0},e),E(c,w)})),[c,function(s){S[s?"unshift":"push"]((()=>{c=s,t(0,c)}))}]}new class extends s{constructor(s){super(),a(this,s,N,J,t,{})}}({target:document.body});
