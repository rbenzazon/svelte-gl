import{S as s,i as a,s as t,M as e,e as o,a as n,c as r,b as i,m as u,n as c,t as p,d as h,f as m,g as f,h as d,o as l,r as g,k as x,p as b,q as j,j as w,u as v,v as y,C as M,D as $,x as k,y as C,w as D,A as E,E as S,I as T}from"./engine.js";import{c as q}from"./skybox.js";import{c as z,a as A}from"./polyhedron.js";import{d as I}from"./jpeg-hdr-loader.js";import{g as L,h as B,a as F,b as G}from"./environment-map-texture.js";import{c as H}from"./specular.js";function J(s){let a,t,d,l;return d=new e({}),{c(){a=o("canvas"),t=n(),r(d.$$.fragment)},m(e,o){i(e,a,o),s[1](a),i(e,t,o),u(d,e,o),l=!0},p:c,i(s){l||(p(d.$$.fragment,s),l=!0)},o(s){h(d.$$.fragment,s),l=!1},d(e){e&&(m(a),m(t)),s[1](null),f(d,e)}}}function K(){}function N(s,a,t){let e,o,n,r,i,u,c;return d(s,g,(s=>t(3,e=s))),d(s,x,(s=>t(4,o=s))),d(s,b,(s=>t(5,n=s))),d(s,j,(s=>t(6,r=s))),d(s,w,(s=>t(7,i=s))),l((async()=>{v(g,e={...e,canvas:u,backgroundColor:y,ambientLightColor:[16777215,.1]},e),v(w,i={...i,position:[0,0,10],target:[0,0,0],fov:50},i),c=await I("skyboxes/spruit-sunrise-8k-hdr.jpg");const s=L(1),a=await q({texture:c.texture,width:c.texture.width,height:c.texture.height,cubeSize:2048,toneMapping:s,convertToCube:B}),t=F(c.texture,c.width,c.height);v(j,r=[a,t],r);const p=z(2,6,A);M($({position:[-2,2,-2],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2}));const h=k(C()),m=G({envMap:t.getTexture,width:t.width,height:t.height,lodMax:t.lodMax}),f=D({diffuse:[1,1,1],metalness:1,specular:H({roughness:.05,ior:1.5,intensity:1,color:[1,1,1]}),envMap:m});v(b,n=[...n,f],n),v(x,o=[...o,E({...p,matrix:h,material:f})],o),v(g,e={...e,loop:K,enabled:!0},e),S(u,w)})),[u,function(s){T[s?"unshift":"push"]((()=>{u=s,t(0,u)}))}]}class O extends s{constructor(s){super(),a(this,s,N,J,t,{})}}export{O as default};
