import{S as a,i as s,s as t,M as e,e as n,a as o,c as i,b as r,m as c,n as f,t as m,d as l,f as p,g as u,h as d,o as g,r as x,l as y,k as b,p as h,j,q as v,N as w,K as $,H as C,z as D,x as E,y as M,u as k,v as I,C as q,D as z,A,E as B,I as H,w as K}from"./engine-KQm4jTw7.js";import{c as L,a as N}from"./polyhedron-DCZyHyQf.js";import{c as P}from"./plane-RueIPkEM.js";import{c as S}from"./texture-BoJ8tXfL.js";import{c as T}from"./contact-shadow-EnRCsT3I.js";import{l as F,m as G,i as J,a as O,g as Q,b as R,c as U}from"./gltf-loader-xybt2Y8S.js";import"./specular-DqxVsGQ2.js";function V(a){let s,t,d,g;return d=new e({}),{c(){s=n("canvas"),t=o(),i(d.$$.fragment)},m(e,n){r(e,s,n),a[1](s),r(e,t,n),c(d,e,n),g=!0},p:f,i(a){g||(m(d.$$.fragment,a),g=!0)},o(a){l(d.$$.fragment,a),g=!1},d(e){e&&(p(s),p(t)),a[1](null),u(d,e)}}}function W(){}function X(a,s,t){let e,n,o,i,r,c,f;return d(a,x,(a=>t(2,e=a))),d(a,y,(a=>t(3,n=a))),d(a,b,(a=>t(4,o=a))),d(a,h,(a=>t(5,i=a))),d(a,j,(a=>t(6,r=a))),d(a,v,(a=>t(7,c=a))),g((async()=>{const a=await F("models/v2/md-blend6-mdlvw.gltf","models/v2/md-blend6-mdlvw.bin"),s=G(a.scene),t=s.find(J),m=s.find(O),l=Q(m),p=R(m);w(p.position,p.position,l);const u=Q(t);$(u,u,Math.PI),C(u,u,[200,200,200]),D(u,u,[0,0,-500]);const d=U(a,t),g=E(M());D(g,g,[0,-1.2,0]),k(x,e={...e,canvas:f,backgroundColor:I,ambientLightColor:[16777215,.1]},e);const H=T(g,1,10,10,1024,64,.9),{getTexture:V}=H;k(v,c=[H],c),k(j,r={...r,position:[0,5,-5],target:[0,1,0],fov:75},r);const X=L(1,5,N),Y=q(z({position:[-2,3,-3],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),Z=q(z({position:[2,-1,-1],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),_=E(M());D(_,_,[3,0,0]),C(_,_,[.1,.1,.1]);const aa=P(10,10,1,1),sa=await S({textureBuffer:V,type:"diffuse"});await S({url:"transparent-texture.png",type:"diffuse"});const ta=K({diffuse:[1,1,1],metalness:0,diffuseMap:sa,transparent:!0}),ea=K({diffuse:[1,1,.5],metalness:0,opacity:.5}),na=K(d.material);k(h,i=[...i,ta,ea,na],i),k(b,o=[...o,A({...d,matrix:u,material:na}),A({...X,matrix:_,material:ea}),A({...aa,matrix:g,material:ta})],o),k(y,n=[...n,Y,Z],n),k(x,e={...e,loop:W,enabled:!0},e),B(f,j)})),[f,function(a){H[a?"unshift":"push"]((()=>{f=a,t(0,f)}))}]}class Y extends a{constructor(a){super(),s(this,a,X,V,t,{})}}export{Y as default};
