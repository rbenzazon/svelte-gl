import{S as a,i as s,s as t,M as n,e as o,a as e,c as i,b as r,m as c,n as m,t as f,d as l,f as d,g as p,h as u,o as g,r as x,l as y,j as b,k as h,p as j,q as v,u as w,v as $,w as C,x as D,y as E,z as M,A as k,B,C as q,D as z,E as A,F,G,H}from"./engine.js";import{c as I,a as L}from"./polyhedron.js";import{c as P}from"./plane.js";import{c as S}from"./texture.js";import{c as T}from"./contact-shadow.js";import{l as J,m as K,i as N,a as O,g as Q,c as R,b as U}from"./gltf-loader.js";import"./specular.js";function V(a){let s,t,u,g;return u=new n({}),{c(){s=o("canvas"),t=e(),i(u.$$.fragment)},m(n,o){r(n,s,o),a[1](s),r(n,t,o),c(u,n,o),g=!0},p:m,i(a){g||(f(u.$$.fragment,a),g=!0)},o(a){l(u.$$.fragment,a),g=!1},d(n){n&&(d(s),d(t)),a[1](null),p(u,n)}}}function W(){}function X(a,s,t){let n,o,e,i,r,c,m;return u(a,x,(a=>t(2,n=a))),u(a,y,(a=>t(3,o=a))),u(a,b,(a=>t(4,e=a))),u(a,h,(a=>t(5,i=a))),u(a,j,(a=>t(6,r=a))),u(a,v,(a=>t(7,c=a))),g((async()=>{const a=await J("models/v2/md-blend6-mdlvw.gltf","models/v2/md-blend6-mdlvw.bin"),s=K(a.scene),t=s.find(N),f=s.find(O),l=Q(f),d=R(f);w(d.position,d.position,l);const p=Q(t);$(p,p,Math.PI),C(p,p,[200,200,200]),D(p,p,[0,0,-500]);const u=U(a,t),g=E(M());D(g,g,[0,-1.2,0]),k(x,n={...n,canvas:m,backgroundColor:B,ambientLightColor:[16777215,.1]},n);const G=T(g,1,10,10,1024,64,.9),{getTexture:V}=G;k(v,c=[G],c),k(j,r={...r,position:[0,5,-5],target:[0,1,0],fov:75},r);const X=I(1,5,L),Y=q(z({position:[-2,3,-3],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),Z=q(z({position:[2,-1,-1],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),_=E(M());D(_,_,[3,0,0]),C(_,_,[.1,.1,.1]);const aa=P(10,10,1,1),sa=await S({textureBuffer:V,type:"diffuse"}),ta=H({diffuse:[1,1,1],metalness:0,diffuseMap:sa,transparent:!0}),na=H({diffuse:[1,1,.5],metalness:0,opacity:.5}),oa=H(u.material);k(h,i=[...i,ta,na,oa],i),k(b,e=[...e,A({...u,matrix:p,material:oa}),A({...X,matrix:_,material:na}),A({...aa,matrix:g,material:ta})],e),k(y,o=[...o,Y,Z],o),k(x,n={...n,loop:W,enabled:!0},n),F(m,j)})),[m,function(a){G[a?"unshift":"push"]((()=>{m=a,t(0,m)}))}]}new class extends a{constructor(a){super(),s(this,a,X,V,t,{})}}({target:document.body});
