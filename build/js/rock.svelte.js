import{S as s,i as a,s as e,M as t,e as n,a as o,c as i,b as r,m as l,n as f,t as m,d as c,f as p,g as u,h as d,o as g,p as w,r as h,l as y,j as $,k as b,q as M,u as j,E as k,v as x,w as D,x as v,A,H as C,y as E,z as P,B as q,R as z,F as B,D as F,G}from"./engine-CfSrEngR.js";import{l as H,m as I,i as L,b as R}from"./gltf-loader-T3oulgyv.js";import{D as S}from"./DebugPanel-BwKMlH7O.js";import{c as J}from"./texture-3VWbGOMU.js";import{c as K}from"./specular-DZzjg2qv.js";import{c as N}from"./plane-BeisbDud.js";function O(s){let a,e,d,g,w,h;return d=new t({}),w=new S({props:{initialCollapsed:!0}}),{c(){a=n("canvas"),e=o(),i(d.$$.fragment),g=o(),i(w.$$.fragment)},m(t,n){r(t,a,n),s[1](a),r(t,e,n),l(d,t,n),r(t,g,n),l(w,t,n),h=!0},p:f,i(s){h||(m(d.$$.fragment,s),m(w.$$.fragment,s),h=!0)},o(s){c(d.$$.fragment,s),c(w.$$.fragment,s),h=!1},d(t){t&&(p(a),p(e),p(g)),s[1](null),u(d,t),u(w,t)}}}function Q(s,a,e){let t,n,o,i,r,l,f,m,c;d(s,w,(s=>e(6,t=s))),d(s,h,(s=>e(7,n=s))),d(s,y,(s=>e(8,o=s))),d(s,$,(s=>e(9,i=s))),d(s,b,(s=>e(10,r=s)));let p=0;function u(){p+=.01;const s=t.position;s[1]+=.01;const a=t.target;a[1]+=.01,M(w,t={...t,position:s,target:a},t);const e=z(f);e.position[1]+=.01;const n=z(m);n.position[1]+=.01,f.set({...e}),m.set({...n});const o=.001*performance.now(),i=4*Math.cos(o),r=4*Math.sin(o),l=x(D());v(l,l,[i,r+p+4,0]),B(l,l,.003*performance.now()),c.matrix.set(l)}return g((async()=>{M(h,n={...n,canvas:l,backgroundColor:j,ambientLightColor:[16777215,.1]},n),M(w,t={...t,position:[0,3,21],target:[0,3,0],fov:36},t);const s=await H("models/rock-left.gltf","models/rock-left.bin"),a=I(s.scene).find(L),e=R(s,a),p=await J({url:"rock-diffuse.jpg",type:"diffuse"}),d=await J({url:"rock-normal.png",type:"normal"}),g=k({metalness:e.material.metalness,diffuse:[.67,.68,.81],diffuseMap:p,normalMap:d}),z=x(D());let B=new Array(60).fill(0).map(((s,a)=>{let e=G(z);return v(e,e,[-10,2*a-4,0]),e}));delete e.matrix;const F=A({...e,material:g,instances:60,matrices:B}),S=await H("models/rock-right.gltf","models/rock-right.bin"),O=I(S.scene).find(L),Q=R(S,O),T=x(D());let U=new Array(60).fill(0).map(((s,a)=>{let e=G(T);return v(e,e,[10,2*a-4,0]),e}));delete Q.matrix;const V=A({...Q,material:g,instances:60,matrices:U}),W=await H("models/ennemi1.gltf","models/ennemi1.bin"),X=I(W.scene).find(L),Y=R(W,X),Z=await J({url:"models/ennemi1-diffuse.png",type:"diffuse"}),_=await J({url:"models/ennemi1-roughness.png",type:"roughness"}),ss=k({...Y.material,metalness:.8090909123420715,specular:K({roughness:1,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,1,1],diffuseMap:Z,roughnessMap:_});console.log("ennemi1Mesh",Y),c=A({...Y,material:ss});const as=N(100,100,1,1),es=await J({url:"background.jpg",type:"diffuse"}),ts=k({diffuse:[.67,.68,.81],metalness:0,diffuseMap:es}),ns=x(D());v(ns,ns,[0,0,-70]),C(ns,ns,Math.PI/2);const os=new Array(5).fill(0).map(((s,a)=>{let e=G(ns);return v(e,e,[0,0,100*-a]),e})),is=A({...as,material:ts,instances:5,matrices:os});f=E(P({color:[.996078431372549,.9529411764705882,.6627450980392157],intensity:7.5,position:[0,9,3],cutoffDistance:120,decayExponent:.001})),m=E(P({position:[-3,-3,1],color:[.6313725490196078,.6235294117647059,.996078431372549],intensity:5,cutoffDistance:15,decayExponent:.25})),M(b,r=[...r,g,ss,ts],r),M($,i=[...i,F,V,c,is],i),M(y,o=[...o,f,m],o),M(h,n={...n,loop:u,enabled:!0},n),q(l,w)})),[l,function(s){F[s?"unshift":"push"]((()=>{l=s,e(0,l)}))}]}class T extends s{constructor(s){super(),a(this,s,Q,O,e,{})}}export{T as default};
