import{S as a,i as e,s,M as t,e as n,a as o,c as i,b as r,m as l,n as c,t as m,d as f,f as p,g as u,h as d,o as g,p as h,r as w,l as y,j as M,k as x,K as b,q as k,u as j,C as v,x as $,y as A,D as C,z as D,H as E,v as _,w as z,A as S,R as T,E as q,B,G}from"./engine-B_VjxpyI.js";import{l as H,m as I,i as K,b as L}from"./gltf-loader-BmgO9cBp.js";import{c as P}from"./specular-C5UV0LBn.js";import{c as R}from"./texture-CCE_0gM_.js";import{c as F}from"./plane-CfBT0t9b.js";import{c as J,l as N,g as O,h as Q,a as U,b as V}from"./environment-map-texture-DuKJz06p.js";import{c as W}from"./skybox-CaAuad8j.js";function X(a){let e,s,d,g;return d=new t({}),{c(){e=n("canvas"),s=o(),i(d.$$.fragment)},m(t,n){r(t,e,n),a[1](e),r(t,s,n),l(d,t,n),g=!0},p:c,i(a){g||(m(d.$$.fragment,a),g=!0)},o(a){f(d.$$.fragment,a),g=!1},d(t){t&&(p(e),p(s)),a[1](null),u(d,t)}}}function Y(a,e,s){let t,n,o,i,r,l,c,m,f,p;d(a,h,(a=>s(6,t=a))),d(a,w,(a=>s(7,n=a))),d(a,y,(a=>s(8,o=a))),d(a,M,(a=>s(9,i=a))),d(a,x,(a=>s(10,r=a))),d(a,b,(a=>s(11,l=a)));let u=0;function X(){u+=.01;const a=t.position;a[1]+=.01;const e=t.target;e[1]+=.01,k(h,t={...t,position:a,target:e},t);const s=T(m);s.position[1]+=.01;const n=T(f);n.position[1]+=.01,m.set({...s}),f.set({...n});const o=.001*performance.now(),i=4*Math.cos(o),r=4*Math.sin(o),l=$(A());C(l,l,[i,r+u+4,0]),q(l,l,.003*performance.now()),p.matrix.set(l)}return g((async()=>{k(w,n={...n,canvas:c,backgroundColor:j,ambientLightColor:[16777215,.1],toneMappings:[J({exposure:1})]},n),k(h,t={...t,position:[0,3,21],target:[0,3,0],fov:36},t);const a=await N("rogland_clear_night_4k.hdr"),e=O(1),s=await W({typedArray:a.data,convertToCube:Q,width:a.width,height:a.height,cubeSize:2048,toneMapping:e}),u=U(a);console.log("environmentMap",u),k(b,l=[s,u],l);const d=await H("models/rock-left.gltf","models/rock-left.bin"),g=I(d.scene).find(K),T=L(d,g),q=await R({url:"rock-diffuse.jpg",type:"diffuse"}),B=await R({url:"rock-normal.png",type:"normal"}),Y=v({metalness:T.material.metalness,diffuse:[.67,.68,.81],diffuseMap:q,normalMap:B});const Z=$(A());let aa=new Array(60).fill(0).map(((a,e)=>{let s=G(Z);return C(s,s,[-10,2*e-4,0]),s}));delete T.matrix;const ea=D({...T,material:Y,instances:60,matrices:aa}),sa=await H("models/rock-right.gltf","models/rock-right.bin"),ta=I(sa.scene).find(K),na=L(sa,ta),oa=$(A());let ia=new Array(60).fill(0).map(((a,e)=>{let s=G(oa);return C(s,s,[10,2*e-4,0]),s}));delete na.matrix;const ra=D({...na,material:Y,instances:60,matrices:ia}),la=await H("models/ennemi1.gltf","models/ennemi1.bin"),ca=I(la.scene).find(K),ma=L(la,ca),fa=await R({url:"models/ennemi1-diffuse.png",type:"diffuse"}),pa=await R({url:"models/ennemi1-roughness.png",type:"roughness"}),ua=V({envMap:u.getTexture,width:u.width,height:u.height,lodMax:u.lodMax}),da=v({...ma.material,metalness:.8090909123420715,specular:P({roughness:1,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,1,1],diffuseMap:fa,roughnessMap:pa,envMap:ua});console.log("ennemi1Mesh",ma),p=D({...ma,material:da});const ga=F(100,100,1,1),ha=await R({url:"background.jpg",type:"diffuse"}),wa=v({diffuse:[.67,.68,.81],metalness:0,diffuseMap:ha}),ya=$(A());C(ya,ya,[0,0,-70]),E(ya,ya,Math.PI/2);const Ma=new Array(5).fill(0).map(((a,e)=>{let s=G(ya);return C(s,s,[0,0,100*-e]),s})),xa=D({...ga,material:wa,instances:5,matrices:Ma});m=_(z({color:[.996078431372549,.9529411764705882,.6627450980392157],intensity:7.5,position:[0,9,3],cutoffDistance:120,decayExponent:.001})),f=_(z({position:[-3,-3,1],color:[.6313725490196078,.6235294117647059,.996078431372549],intensity:5,cutoffDistance:15,decayExponent:.25})),k(x,r=[...r,Y,da,wa],r),k(M,i=[...i,ea,ra,p,xa],i),k(y,o=[...o,m,f],o),k(w,n={...n,loop:X,enabled:!0},n),S(c,h)})),[c,function(a){B[a?"unshift":"push"]((()=>{c=a,s(0,c)}))}]}class Z extends a{constructor(a){super(),e(this,a,Y,X,s,{})}}export{Z as default};
