import{K as s,O as a,L as t,S as e,i as n,s as o,M as r,e as i,a as l,c as u,b as c,m,n as f,t as p,d as h,f as d,g,h as y,o as M,r as w,l as $,j as b,k as x,p as j,H as k,A,B as D,C as v,D as F,x as C,E,y as P,z as G,F as L,G as z,P as B}from"./Menu-C4XSDfXF.js";import{l as H,t as I,b as K}from"./gltf-loader-Dlb2qqCJ.js";import{D as N}from"./DebugPanel-DVa0tNdT.js";import{c as O}from"./texture-D-LL34uK.js";import{c as S}from"./specular-C1xLo6g_.js";import{c as q,a as J}from"./debug-program-BglIdCNp.js";function Q(s){let a,t,e,n,o,y;return e=new r({}),o=new N({}),{c(){a=i("canvas"),t=l(),u(e.$$.fragment),n=l(),u(o.$$.fragment)},m(r,i){c(r,a,i),s[1](a),c(r,t,i),m(e,r,i),c(r,n,i),m(o,r,i),y=!0},p:f,i(s){y||(p(e.$$.fragment,s),p(o.$$.fragment,s),y=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),y=!1},d(r){r&&(d(a),d(t),d(n)),s[1](null),g(e,r),g(o,r)}}}function R(){}function T(e,n,o){let r,i,l,u,c,m,f,p,h;return y(e,w,(s=>o(6,r=s))),y(e,$,(s=>o(7,i=s))),y(e,b,(s=>o(8,l=s))),y(e,x,(s=>o(9,u=s))),y(e,j,(s=>o(10,c=s))),M((async()=>{const e=await H("models/rock.gltf","models/rock.bin");let n;I(e.scene,(s=>{null!=s.position&&(n=s)}));const o=K(e,n),d=await O({url:"rock-diffuse.jpg",type:"diffuse"}),g=await O({url:"rock-normal.png",type:"normal"}),y=k({metalness:o.material.metalness,diffuse:[.67,.68,.81],diffuseMap:d,normalMap:g}),M=await H("models/ennemi1.gltf","models/ennemi1.bin");let z;I(M.scene,(s=>{null!=s.position&&(z=s)}));const N=K(M,z),Q=await O({url:"models/ennemi1-diffuse.png",type:"diffuse"}),T=await O({url:"models/ennemi1-roughness.png",type:"roughness"});console.log("ennemi1Mesh.material",N.material);const U=k({...N.material,specular:S({roughness:1,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,1,1],diffuseMap:Q,roughnessMap:T});A(w,r={...r,canvas:m,backgroundColor:D,ambientLightColor:[16777215,.1]},r),A(j,c={...c,position:[0,3,10],target:[0,3,0],fov:75},c),f=v(F({color:[.996078431372549,.9529411764705882,.6627450980392157],intensity:7.5,position:[0,9,0],cutoffDistance:27,decayExponent:.05})),p=v(F({position:[-3,-3,1],color:[.6313725490196078,.6235294117647059,.996078431372549],intensity:0,cutoffDistance:15,decayExponent:.25}));const V=o.matrix;let W=new Array(20).fill(0).map(((s,a)=>{let t=B(V);return C(t,t,[0,2*a-4,-4.5]),t}));E({...o,material:y,instances:20,matrices:W},!1,[1,0,0]),E({...N,material:U},!1);const X=function(e=1,n=1,o=1,r=1,i=!0){o=Math.max(o,1),r=Math.max(r,1);const l=n/2,u=2*Math.PI/o,c=[],m=[],f=[],p=[0,1,0],h=[0,-1,0],d=[],g=[],y=[],M=n/r;for(let t=0;t<o;t++){const n=u*t,o=u*(t+.5),r=Math.cos(n),l=Math.sin(n);c.push([r*e,l*e]),i?m.push(s(a(),[r,0,l])):m.push(s(a(),[Math.cos(o),0,Math.sin(o)])),f.push([.25*r,.25*l])}const w=[.25,.25],$=[.75,.25];for(let s=0;s<o;s++){const a=(s+1)%o,t=l,e=-l;d.push([0,t,0],[c[a][0],t,c[a][1]],[c[s][0],t,c[s][1]]),g.push(p,p,p),y.push(w,[f[s][0]+w[0],f[s][1]+w[1]],[f[a][0]+w[0],f[a][1]+w[1]]),d.push([0,e,0],[c[s][0],e,c[s][1]],[c[a][0],e,c[a][1]]),g.push(h,h,h),y.push($,[f[s][0]+$[0],f[s][1]+$[1]],[f[a][0]+$[0],f[a][1]+$[1]])}for(let s=0;s<r;s++){const a=l-s*M,t=a-M;for(let e=0;e<o;e++){const n=(e+1)%o;d.push([c[e][0],a,c[e][1]],[c[n][0],a,c[n][1]],[c[n][0],t,c[n][1]],[c[e][0],a,c[e][1]],[c[n][0],t,c[n][1]],[c[e][0],t,c[e][1]]),i?g.push(m[e],m[n],m[n],m[e],m[n],m[e]):g.push(m[e],m[e],m[e],m[e],m[e],m[e]);const l=.5-e/o/2,u=.5+s/r/2,f=.5-n/o/2,p=.5+(s+1)/r/2;y.push([l,u],[f,u],[f,p],[l,u],[f,p],[l,p])}}return{attributes:{positions:new Float32Array(d.flat()),normals:new Float32Array(g.flat()),uvs:new Float32Array(y.flat())},drawMode:t[4]}}(1,1,32,1);console.log("cylinderGeometry",X);const Y=k({diffuse:[.916,.916,.916],metalness:.8090909123420715,specular:S({roughness:.1,ior:1.4,intensity:.8,color:[1,1,1]})}),Z=P(G());C(Z,Z,[0,1,0]);const _=k({diffuse:[1,0,0],metalness:0,program:J()}),ss=q({...X,matrix:Z,material:_});console.log("debugNormalMesh",ss),h=E({...X,material:Y,matrix:Z}),A(x,u=[...u,y,U,Y,_],u),A(b,l=[...l,h,E(ss)],l),A($,i=[...i,f,p],i),A(w,r={...r,loop:R,enabled:!0},r),L(m,j)})),[m,function(s){z[s?"unshift":"push"]((()=>{m=s,o(0,m)}))}]}class U extends e{constructor(s){super(),n(this,s,T,Q,o,{})}}export{U as default};
