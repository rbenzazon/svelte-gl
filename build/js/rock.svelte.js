import{K as s,L as a,O as t,S as e,i as n,s as o,M as r,e as i,a as l,c as u,b as c,m as f,n as m,t as p,d as h,f as d,g,h as y,o as M,r as w,l as x,j as $,k as b,p as j,H as k,A,B as D,C as v,D as F,x as P,E as C,y as E,z as G,F as I,P as L,Q as z,G as B,R as H}from"./Menu-BbmabDYp.js";import{l as K,t as O,b as Q}from"./gltf-loader-BTqNGcfx.js";import{D as R}from"./DebugPanel-D7UgsXLz.js";import{c as S}from"./texture-Cl0IZQsN.js";import{c as q}from"./specular-DIqEVPtw.js";function J(s){let a,t,e,n,o,y;return e=new r({}),o=new R({}),{c(){a=i("canvas"),t=l(),u(e.$$.fragment),n=l(),u(o.$$.fragment)},m(r,i){c(r,a,i),s[1](a),c(r,t,i),f(e,r,i),c(r,n,i),f(o,r,i),y=!0},p:m,i(s){y||(p(e.$$.fragment,s),p(o.$$.fragment,s),y=!0)},o(s){h(e.$$.fragment,s),h(o.$$.fragment,s),y=!1},d(r){r&&(d(a),d(t),d(n)),s[1](null),g(e,r),g(o,r)}}}function N(e,n,o){let r,i,l,u,c,f,m,p,h,d;function g(){const s=L(d.matrix);z(s,s,.001),d.matrix.set(s)}return y(e,w,(s=>o(6,r=s))),y(e,x,(s=>o(7,i=s))),y(e,$,(s=>o(8,l=s))),y(e,b,(s=>o(9,u=s))),y(e,j,(s=>o(10,c=s))),M((async()=>{const e=await K("models/rock.gltf","models/rock.bin");let n;O(e.scene,(s=>{null!=s.position&&(n=s)}));const o=Q(e,n),y=await S({url:"rock-diffuse.jpg",type:"diffuse"}),M=await S({url:"rock-normal.png",type:"normal"}),L=k({metalness:o.material.metalness,diffuse:[.67,.68,.81],diffuseMap:y,normalMap:M}),z=await K("models/ennemi1.gltf","models/ennemi1.bin");let B;O(z.scene,(s=>{null!=s.position&&(B=s)}));const R=Q(z,B),J=await S({url:"models/ennemi1-diffuse.png",type:"diffuse"}),N=await S({url:"models/ennemi1-roughness.png",type:"roughness"});console.log("ennemi1Mesh.material",R.material);const T=k({...R.material,specular:q({roughness:1,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,1,1],diffuseMap:J,roughnessMap:N});A(w,r={...r,canvas:f,backgroundColor:D,ambientLightColor:[16777215,.1]},r),A(j,c={...c,position:[0,3,10],target:[0,3,0],fov:75},c),m=v(F({color:[.996078431372549,.9529411764705882,.6627450980392157],intensity:7.5,position:[0,9,0],cutoffDistance:27,decayExponent:.05})),p=v(F({position:[-3,-3,1],color:[.6313725490196078,.6235294117647059,.996078431372549],intensity:0,cutoffDistance:15,decayExponent:.25}));const U=o.matrix;let V=new Array(20).fill(0).map(((s,a)=>{let t=H(U);return P(t,t,[0,2*a-4,-4.5]),t}));C({...o,material:L,instances:20,matrices:V},!1,[1,0,0]),h=C({...R,material:T},!1);const W=function(e=1,n=1,o=1,r=1){o=Math.max(o,1),r=Math.max(r,1);const i=n/2,l=2*Math.PI/o,u=[],c=[],f=[],m=[0,1,0],p=[0,-1,0],h=[],d=[],g=[],y=n/r;for(let a=0;a<o;a++){const n=l*a,o=t(1,Math.PI/2,n),r=Math.cos(n),i=Math.sin(n);u.push([r*e,i*e]),c.push(s(o,o)),f.push([.25*r,.25*i])}const M=[.25,.25],w=[.75,.25];for(let s=0;s<o;s++){const a=(s+1)%o,t=i,e=-i;h.push([0,t,0],[u[a][0],t,u[a][1]],[u[s][0],t,u[s][1]]),d.push(m,m,m),g.push(M,[f[s][0]+M[0],f[s][1]+M[1]],[f[a][0]+M[0],f[a][1]+M[1]]),h.push([0,e,0],[u[s][0],e,u[s][1]],[u[a][0],e,u[a][1]]),d.push(p,p,p),g.push(w,[f[s][0]+w[0],f[s][1]+w[1]],[f[a][0]+w[0],f[a][1]+w[1]])}for(let s=0;s<r;s++){const a=i-s*y,t=a-y;for(let e=0;e<o;e++){const n=(e+1)%o;h.push([u[e][0],a,u[e][1]],[u[n][0],a,u[n][1]],[u[n][0],t,u[n][1]],[u[e][0],a,u[e][1]],[u[n][0],t,u[n][1]],[u[e][0],t,u[e][1]]),d.push(c[e],c[e],c[e],c[e],c[e],c[e]);const i=.5-e/o/2,l=.5+s/r/2,f=.5-n/o/2,m=.5+(s+1)/r/2;g.push([i,l],[f,l],[f,m],[i,l],[f,m],[i,m])}}return{attributes:{positions:new Float32Array(h.flat()),normals:new Float32Array(d.flat()),uvs:new Float32Array(g.flat())},drawMode:a[4]}}(1,1,32,1);console.log("cylinderGeometry",W);const X=k({diffuse:[.916,.916,.916],metalness:.8090909123420715,specular:q({roughness:.1,ior:1.4,intensity:.8,color:[1,1,1]})}),Y=E(G());P(Y,Y,[0,1,0]),d=C({...W,material:X,matrix:Y}),A(b,u=[...u,L,T,X],u),A($,l=[...l,h,d],l),A(x,i=[...i,m,p],i),A(w,r={...r,loop:g,enabled:!0},r),I(f,j)})),[f,function(s){B[s?"unshift":"push"]((()=>{f=s,o(0,f)}))}]}class T extends e{constructor(s){super(),n(this,s,N,J,o,{})}}export{T as default};
