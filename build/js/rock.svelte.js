import{S as s,i as a,s as e,M as t,e as n,a as o,c as i,b as r,m as l,n as f,t as m,d as c,f as p,g as u,h as d,o as g,p as w,r as y,l as h,j as $,k as b,H as M,y as j,z as k,x,E as D,O as A,C,D as v,A as E,B as P,F as z,P as B,N as F,G,Q as H}from"./Menu-DZh97vD9.js";import{l as I,m as L,i as N,b as O}from"./gltf-loader-BGVNKfCQ.js";import{D as Q}from"./DebugPanel-CBwPu8Ta.js";import{c as S}from"./texture-Chz8Mlkv.js";import{c as q}from"./specular-h9jYL8iC.js";import{c as J}from"./plane-D0EsqKhe.js";function K(s){let a,e,d,g,w,y;return d=new t({}),w=new Q({props:{initialCollapsed:!0}}),{c(){a=n("canvas"),e=o(),i(d.$$.fragment),g=o(),i(w.$$.fragment)},m(t,n){r(t,a,n),s[1](a),r(t,e,n),l(d,t,n),r(t,g,n),l(w,t,n),y=!0},p:f,i(s){y||(m(d.$$.fragment,s),m(w.$$.fragment,s),y=!0)},o(s){c(d.$$.fragment,s),c(w.$$.fragment,s),y=!1},d(t){t&&(p(a),p(e),p(g)),s[1](null),u(d,t),u(w,t)}}}function R(s,a,e){let t,n,o,i,r,l,f,m,c;d(s,w,(s=>e(6,t=s))),d(s,y,(s=>e(7,n=s))),d(s,h,(s=>e(8,o=s))),d(s,$,(s=>e(9,i=s))),d(s,b,(s=>e(10,r=s)));let p=0;function u(){p+=.01;const s=t.position;s[1]+=.01;const a=t.target;a[1]+=.01,E(w,t={...t,position:s,target:a},t);const e=B(f);e.position[1]+=.01;const n=B(m);n.position[1]+=.01,f.set({...e}),m.set({...n});const o=.001*performance.now(),i=4*Math.cos(o),r=4*Math.sin(o),l=j(k());x(l,l,[i,r+p+4,0]),F(l,l,.003*performance.now()),c.matrix.set(l)}return g((async()=>{const s=await I("models/rock-left.gltf","models/rock-left.bin"),a=L(s.scene).find(N),e=O(s,a),p=await S({url:"rock-diffuse.jpg",type:"diffuse"}),d=await S({url:"rock-normal.png",type:"normal"}),g=M({metalness:e.material.metalness,diffuse:[.67,.68,.81],diffuseMap:p,normalMap:d}),B=j(k());let F=new Array(60).fill(0).map(((s,a)=>{let e=H(B);return x(e,e,[-10,2*a-4,0]),e}));delete e.matrix;const G=D({...e,material:g,instances:60,matrices:F}),Q=await I("models/rock-right.gltf","models/rock-right.bin"),K=L(Q.scene).find(N),R=O(Q,K),T=j(k());let U=new Array(60).fill(0).map(((s,a)=>{let e=H(T);return x(e,e,[10,2*a-4,0]),e}));delete R.matrix;const V=D({...R,material:g,instances:60,matrices:U}),W=await I("models/ennemi1.gltf","models/ennemi1.bin"),X=L(W.scene).find(N),Y=O(W,X),Z=await S({url:"models/ennemi1-diffuse.png",type:"diffuse"}),_=await S({url:"models/ennemi1-roughness.png",type:"roughness"}),ss=M({...Y.material,specular:q({roughness:1,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,1,1],diffuseMap:Z,roughnessMap:_});c=D({...Y,material:ss});const as=J(100,100,1,1),es=await S({url:"background.jpg",type:"diffuse"}),ts=M({diffuse:[.67,.68,.81],metalness:0,diffuseMap:es}),ns=j(k());x(ns,ns,[0,0,-70]),A(ns,ns,Math.PI/2);const os=new Array(5).fill(0).map(((s,a)=>{let e=H(ns);return x(e,e,[0,0,100*-a]),e})),is=D({...as,material:ts,instances:5,matrices:os});f=C(v({color:[.996078431372549,.9529411764705882,.6627450980392157],intensity:7.5,position:[0,9,3],cutoffDistance:120,decayExponent:.001})),m=C(v({position:[-3,-3,1],color:[.6313725490196078,.6235294117647059,.996078431372549],intensity:5,cutoffDistance:15,decayExponent:.25})),E(y,n={...n,canvas:l,backgroundColor:P,ambientLightColor:[16777215,.1]},n),E(w,t={...t,position:[0,3,21],target:[0,3,0],fov:36},t),E(b,r=[...r,g,ss,ts],r),E($,i=[...i,G,V,c,is],i),E(h,o=[...o,f,m],o),E(y,n={...n,loop:u,enabled:!0},n),z(l,w)})),[l,function(s){G[s?"unshift":"push"]((()=>{l=s,e(0,l)}))}]}class T extends s{constructor(s){super(),a(this,s,R,K,e,{})}}export{T as default};
