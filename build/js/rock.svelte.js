import{S as e,i as a,s,M as t,e as n,a as o,c as i,b as r,m as l,n as c,t as m,d as f,f as p,g as u,h as d,o as g,j as h,r as w,l as y,k as M,p as x,q as b,u as k,v as j,w as v,x as A,y as $,z as I,A as C,B as D,C as E,D as P,E as _,F as z,G as S,H as T,I as q,J as B}from"./engine-KQm4jTw7.js";import{l as F,m as G,i as H,c as J}from"./gltf-loader-xybt2Y8S.js";import{c as L}from"./specular-DqxVsGQ2.js";import{c as K}from"./texture-BoJ8tXfL.js";import{c as N}from"./plane-RueIPkEM.js";import{c as O,l as Q,g as R,h as U,a as V,b as W}from"./environment-map-texture-ojnj8srZ.js";import{c as X}from"./skybox-BVpIBTql.js";function Y(e){let a,s,d,g;return d=new t({}),{c(){a=n("canvas"),s=o(),i(d.$$.fragment)},m(t,n){r(t,a,n),e[1](a),r(t,s,n),l(d,t,n),g=!0},p:c,i(e){g||(m(d.$$.fragment,e),g=!0)},o(e){f(d.$$.fragment,e),g=!1},d(t){t&&(p(a),p(s)),e[1](null),u(d,t)}}}function Z(e,a,s){let t,n,o,i,r,l,c,m,f,p;d(e,h,(e=>s(6,t=e))),d(e,w,(e=>s(7,n=e))),d(e,y,(e=>s(8,o=e))),d(e,M,(e=>s(9,i=e))),d(e,x,(e=>s(10,r=e))),d(e,b,(e=>s(11,l=e)));let u=0;function Y(){u+=.01;const e=t.position;e[1]+=.01;const a=t.target;a[1]+=.01,k(h,t={...t,position:e,target:a},t);const s=z(m);s.position[1]+=.01;const n=z(f);n.position[1]+=.01,m.set({...s}),f.set({...n});for(let e=0;e<7;e++){const a=.001*performance.now()+e*Math.PI*2/7,s=4,t=Math.cos(a)*s,n=Math.sin(a)*s,o=A($());I(o,o,[t,n+u+4,0]),S(o,o,.003*performance.now()+e*Math.PI*2/7),T(o,o,[.6,.6,.6]),p.matrices.setInstance(e,o)}}return g((async()=>{k(w,n={...n,canvas:c,backgroundColor:j,ambientLightColor:[16777215,.1],toneMappings:[O({exposure:1})]},n),k(h,t={...t,position:[0,3,21],target:[0,3,0],fov:36},t);const e=await Q("rogland_clear_night_4k.hdr"),a=R(1),s=await X({typedArray:e.data,convertToCube:U,width:e.width,height:e.height,cubeSize:2048,toneMapping:a}),u=V(e);console.log("environmentMap",u),k(b,l=[s,u],l);const d=W({envMap:u.getTexture,width:u.width,height:u.height,lodMax:u.lodMax}),g=await F("models/rock-left.gltf","models/rock-left.bin"),z=G(g.scene).find(H),S=J(g,z),T=await K({url:"rock-diffuse.jpg",type:"diffuse"}),q=await K({url:"rock-normal.png",type:"normal"}),Z=v({metalness:S.material.metalness,diffuse:[.67,.68,.81],specular:L({roughness:1,ior:1.4,intensity:.5,color:[1,1,1]}),diffuseMap:T,normalMap:q,envMap:d});const ee=A($());let ae=new Array(60).fill(0).map(((e,a)=>{let s=B(ee);return I(s,s,[-10,2*a-4,0]),s}));delete S.matrix;const se=C({...S,material:Z,instances:60,matrices:ae}),te=await F("models/rock-right.gltf","models/rock-right.bin"),ne=G(te.scene).find(H),oe=J(te,ne),ie=A($());let re=new Array(60).fill(0).map(((e,a)=>{let s=B(ie);return I(s,s,[10,2*a-4,0]),s}));delete oe.matrix;const le=C({...oe,material:Z,instances:60,matrices:re}),ce=await F("models/ennemi1.gltf","models/ennemi1.bin"),me=G(ce.scene).find(H),fe=J(ce,me),pe=await K({url:"models/ennemi1-diffuse.png",type:"diffuse"}),ue=await K({url:"models/ennemi1-roughness.png",type:"roughness"}),de=v({...fe.material,metalness:.8090909123420715,specular:L({roughness:1,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,1,1],diffuseMap:pe,roughnessMap:ue,envMap:d});console.log("ennemi1Mesh",fe);const ge=new Array(7).fill(0).map(((e,a)=>A($())));delete fe.matrix,p=C({...fe,matrices:ge,instances:7,material:de});const he=N(100,100,1,1),we=await K({url:"background.jpg",type:"diffuse"}),ye=v({diffuse:[.67,.68,.81],metalness:0,diffuseMap:we}),Me=A($());I(Me,Me,[0,0,-70]),D(Me,Me,Math.PI/2);const xe=new Array(5).fill(0).map(((e,a)=>{let s=B(Me);return I(s,s,[0,0,100*-a]),s})),be=C({...he,material:ye,instances:5,matrices:xe});m=E(P({color:[.996078431372549,.9529411764705882,.6627450980392157],intensity:4,position:[0,9,3],cutoffDistance:120,decayExponent:.001})),f=E(P({position:[-3,-3,1],color:[.6313725490196078,.6235294117647059,.996078431372549],intensity:3,cutoffDistance:15,decayExponent:.25})),k(x,r=[...r,Z,de,ye],r),k(M,i=[...i,se,le,p,be],i),k(y,o=[...o,m,f],o),k(w,n={...n,loop:Y,enabled:!0},n),_(c,h)})),[c,function(e){q[e?"unshift":"push"]((()=>{c=e,s(0,c)}))}]}class ee extends e{constructor(e){super(),a(this,e,Z,Y,s,{})}}export{ee as default};
