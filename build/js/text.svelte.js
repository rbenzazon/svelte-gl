import{aF as s,r as a,as as e,z as t,x as n,S as o,i as r,s as c,M as i,e as m,a as l,c as p,b as u,m as f,n as d,t as h,d as g,f as M,g as x,h as w,o as b,j,k as v,q as S,p as y,A as $,aG as k,H as C,y as E,w as F,E as G,F as L,K as q,G as K}from"./engine.js";import{d as O}from"./jpeg-hdr-loader.js";import{c as T,g as z,a as A,b as D}from"./environment-map-texture.js";import{c as H}from"./specular.js";import{i as P}from"./dracoDecoder.js";import{l as R,m as V,i as B,b as I}from"./gltf-loader.js";function J(s){let a,e,t,n;return t=new i({}),{c(){a=m("canvas"),e=l(),p(t.$$.fragment)},m(o,r){u(o,a,r),s[1](a),u(o,e,r),f(t,o,r),n=!0},p:d,i(s){n||(h(t.$$.fragment,s),n=!0)},o(s){g(t.$$.fragment,s),n=!1},d(n){n&&(M(a),M(e)),s[1](null),x(t,n)}}}function N(o,r,c){let i,m,l,p,u,f,d;function h(){const{value:s}=d;console.log("value",s),q(s,s,.001),d.set(s)}return w(o,a,(s=>c(4,i=s))),w(o,j,(s=>c(5,m=s))),w(o,v,(s=>c(6,l=s))),w(o,S,(s=>c(7,p=s))),w(o,y,(s=>c(8,u=s))),b((async()=>{$(a,i={...i,canvas:f,backgroundColor:k,ambientLightColor:[16777215,.1],toneMappings:[T({exposure:1})]},i),$(y,u={...u,position:[0,0,35],target:[2,0,-1],fov:70},u);const o=await O("skyboxes/qwantani-noon-4k.jpg");z(1);const r=A(o.texture,o.width,o.height);$(S,p=[r],p);const c=D({envMap:r.getTexture,width:r.width,height:r.height,lodMax:r.lodMax}),g=C({metalness:.95,specular:H({roughness:.02,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,1,1],envMap:c}),M=await async function(s,a,e){const t=await P("draco/"),n=await R(s,a,t),o=V(n.scene).reduce(((s,a)=>(B(a)&&(s[a.name]=a),s)),{}),r={};for(const c in o){const s=I(n,o[c]);delete s.matrix;const a={...s,material:e,instances:0,matrices:[],commonMatrices:[]};r[c]=a}return{letterSpacing:.4,fontFile:n,letterMap:o,meshMap:r,displayedMeshes:{}}}("models/xenon-font.gltf","models/xenon-font.bin",g),x="SVELTE GL ROCKS",w=E(t());F(w,w,[8,8,8]),n(w,w,[7.5*-M.letterSpacing+.2,0,0]);const{charSetMeshes:b,commonMatrix:q}=function(o,r,c){let i=0;const{letterSpacing:m,meshMap:l}=r,p=o.split("");new Set(p).delete(" ");const u={},f=s(a.set);for(const s of p){const a=l[s];if(!u[s]&&a&&(u[s]=a)," "===s){i+=m;continue}a.instances++;const o=e(t(),c);n(o,o,[i,0,0]),a.matrices.push(o),a.commonMatrices.push(f),i+=m}return r.cursorPos=i,{charSetMeshes:u,commonMatrix:f}}(x,M,w);d=q;const K=Object.values(b).map((s=>G(s)));$(v,l=[...l,g],l),$(j,m=[...m,...K],m),$(a,i={...i,loop:h,enabled:!0},i),L(f,y)})),[f,function(s){K[s?"unshift":"push"]((()=>{f=s,c(0,f)}))}]}new class extends o{constructor(s){super(),r(this,s,N,J,c,{})}}({target:document.body});
