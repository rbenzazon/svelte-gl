import{S as s,i as a,s as t,M as n,e,a as o,c as r,b as c,m as i,n as f,t as l,d as m,f as u,g,h as p,o as $,r as h,l as d,j as b,k as y,p as M,A as j,B as w,y as v,z as D,x as I,K as x,w as C,C as k,D as A,E,F as L,G as P,H as z,L as B,I as F,v as G,N as H}from"./engine.js";import{c as K}from"./cube.js";import{D as N}from"./DebugPanel.js";import"./specular.js";function S(s){let a,t,p,$,h,d;return p=new n({}),h=new N({}),{c(){a=e("canvas"),t=o(),r(p.$$.fragment),$=o(),r(h.$$.fragment)},m(n,e){c(n,a,e),s[1](a),c(n,t,e),i(p,n,e),c(n,$,e),i(h,n,e),d=!0},p:f,i(s){d||(l(p.$$.fragment,s),l(h.$$.fragment,s),d=!0)},o(s){m(p.$$.fragment,s),m(h.$$.fragment,s),d=!1},d(n){n&&(u(a),u(t),u($)),s[1](null),g(p,n),g(h,n)}}}const q=512;function J(s,a,t){let n,e,o,r,c,i,f;function l(s,a){const t=.001*Math.PI,n=s.matrices.getInstance(a);x(n,n,t/2),F(n,n,t),G(n,n,t/3),s.matrices.setInstance(a,n)}function m(){for(let s=0;s<q;s++)l(f,s)}return p(s,h,(s=>t(3,n=s))),p(s,d,(s=>t(4,e=s))),p(s,b,(s=>t(5,o=s))),p(s,y,(s=>t(6,r=s))),p(s,M,(s=>t(7,c=s))),$((async()=>{j(h,n={...n,canvas:i,backgroundColor:w,ambientLightColor:[16777215,.1]},n),j(M,c={...c,position:[0,5,-20],target:[0,1,0],fov:75},c);const s=K(),a=v(D());I(a,a,[3,1.5,0]);const t=z({diffuse:[1,.5,.5],metalness:0});j(y,r=[...r,t],r);const l=v(D());let u=new Array(q).fill(0).map(((s,a)=>{let t=B(l);const n=Math.ceil(Math.cbrt(q)),e=a%n,o=Math.floor(a/n)%n,r=Math.floor(a/(n*n));return I(t,t,[2*(e-(n-1)/2),2*(o-(n-1)/2),2*(r-(n-1)/2)]),x(t,t,H(10*a)),C(t,t,[.5,.5,.5]),t}));const g=k(A({color:[1,1,1],intensity:27,position:[-2,12,-12],cutoffDistance:30,decayExponent:1.5}));f=E({...s,instances:q,matrices:u,material:t}),j(b,o=[...o,f],o),j(d,e=[...e,g],e),j(h,n={...n,loop:m,enabled:!0},n),L(i,M)})),[i,function(s){P[s?"unshift":"push"]((()=>{i=s,t(0,i)}))}]}new class extends s{constructor(s){super(),a(this,s,J,S,t,{})}}({target:document.body});
