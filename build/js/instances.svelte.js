import{S as s,i as a,s as t,M as n,e,a as o,c as r,b as c,m as i,n as f,t as l,d as m,f as u,g as p,h as g,o as $,r as h,l as d,j as b,k as M,p as j,q as y,u as v,v as w,w as x,x as D,F as I,C,y as k,z as A,A as E,B as P,D as q,E as z,G as B,H as F,I as G,J as H}from"./engine-CfSrEngR.js";import{c as J}from"./cube-BbLezRXc.js";import{D as L}from"./DebugPanel-BwKMlH7O.js";import"./specular-DZzjg2qv.js";function S(s){let a,t,g,$,h,d;return g=new n({}),h=new L({}),{c(){a=e("canvas"),t=o(),r(g.$$.fragment),$=o(),r(h.$$.fragment)},m(n,e){c(n,a,e),s[1](a),c(n,t,e),i(g,n,e),c(n,$,e),i(h,n,e),d=!0},p:f,i(s){d||(l(g.$$.fragment,s),l(h.$$.fragment,s),d=!0)},o(s){m(g.$$.fragment,s),m(h.$$.fragment,s),d=!1},d(n){n&&(u(a),u(t),u($)),s[1](null),p(g,n),p(h,n)}}}const K=512;function N(s,a,t){let n,e,o,r,c,i,f;function l(s,a){const t=.001*Math.PI,n=s.matrices.getInstance(a);I(n,n,t/2),F(n,n,t),G(n,n,t/3),s.matrices.setInstance(a,n)}function m(){for(let s=0;s<K;s++)l(f,s)}return g(s,h,(s=>t(3,n=s))),g(s,d,(s=>t(4,e=s))),g(s,b,(s=>t(5,o=s))),g(s,M,(s=>t(6,r=s))),g(s,j,(s=>t(7,c=s))),$((async()=>{y(h,n={...n,canvas:i,backgroundColor:v,ambientLightColor:[16777215,.1]},n),y(j,c={...c,position:[0,5,-20],target:[0,1,0],fov:75},c);const s=J(),a=w(x());D(a,a,[3,1.5,0]);const t=z({diffuse:[1,.5,.5],metalness:0});y(M,r=[...r,t],r);const l=w(x());let u=new Array(K).fill(0).map(((s,a)=>{let t=B(l);const n=Math.ceil(Math.cbrt(K)),e=a%n,o=Math.floor(a/n)%n,r=Math.floor(a/(n*n));return D(t,t,[2*(e-(n-1)/2),2*(o-(n-1)/2),2*(r-(n-1)/2)]),I(t,t,H(10*a)),C(t,t,[.5,.5,.5]),t}));const p=k(A({color:[1,1,1],intensity:27,position:[-2,12,-12],cutoffDistance:30,decayExponent:1.5}));f=E({...s,instances:K,matrices:u,material:t}),y(b,o=[...o,f],o),y(d,e=[...e,p],e),y(h,n={...n,loop:m,enabled:!0},n),P(i,j)})),[i,function(s){q[s?"unshift":"push"]((()=>{i=s,t(0,i)}))}]}class O extends s{constructor(s){super(),a(this,s,N,S,t,{})}}export{O as default};
