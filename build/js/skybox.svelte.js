import{S as a,i as s,s as t,M as o,e,a as n,c as r,b as i,m as c,n as p,t as m,d as u,f as l,g as f,h,o as g,r as d,j as x,k as b,K as v,p as y,q as M,u as w,x as j,y as $,v as k,w as C,C as _,z,A,B as S}from"./engine-B_VjxpyI.js";import{c as T}from"./skybox-CaAuad8j.js";import{c as q,a as B}from"./polyhedron-C1OX3Odu.js";import{c as D,a as E}from"./debug-program-Crum9Xvi.js";import{c as K,l as L,g as F,h as G,a as H,b as I}from"./environment-map-texture-DuKJz06p.js";import{c as J}from"./specular-C5UV0LBn.js";function N(a){let s,t,h,g;return h=new o({}),{c(){s=e("canvas"),t=n(),r(h.$$.fragment)},m(o,e){i(o,s,e),a[1](s),i(o,t,e),c(h,o,e),g=!0},p:p,i(a){g||(m(h.$$.fragment,a),g=!0)},o(a){u(h.$$.fragment,a),g=!1},d(o){o&&(l(s),l(t)),a[1](null),f(h,o)}}}function O(){}function P(a,s,t){let o,e,n,r,i,c,p;return h(a,d,(a=>t(3,o=a))),h(a,x,(a=>t(4,e=a))),h(a,b,(a=>t(5,n=a))),h(a,v,(a=>t(6,r=a))),h(a,y,(a=>t(7,i=a))),g((async()=>{M(d,o={...o,canvas:c,backgroundColor:w,ambientLightColor:[16777215,.1],toneMappings:[K({exposure:1})]},o),M(y,i={...i,position:[-4.5,.8,-2.5],target:[0,0,0],fov:75},i),p=await L("christmas_photo_studio_01_4k.hdr");const a=F(1),s=await T({typedArray:p.data,convertToCube:G,width:p.width,height:p.height,cubeSize:2048,toneMapping:a}),t=H(p);console.log("environmentMap",t),M(v,r=[s,t],r);const m=q(2,5,B),u=j($()),l=_({diffuse:[1,0,0],metalness:0,program:E()});D({...m,matrix:u,material:l}),k(C({position:[-2,2,2],color:[1,1,1],intensity:5,cutoffDistance:0,decayExponent:2}));const f=I({envMap:t.getTexture,width:t.width,height:t.height,lodMax:t.lodMax});console.log("envMap",f);const h=_({diffuse:[1,1,1],metalness:1,specular:J({roughness:.05,ior:1.5,intensity:1,color:[1,1,1]}),envMap:f});M(b,n=[...n,h],n),M(x,e=[...e,z({...m,matrix:u,material:h})],e),M(d,o={...o,loop:O,enabled:!0},o),A(c,y)})),[c,function(a){S[a?"unshift":"push"]((()=>{c=a,t(0,c)}))}]}class Q extends a{constructor(a){super(),s(this,a,P,N,t,{})}}export{Q as default};
