import{S as a,i as s,s as t,M as e,e as o,a as n,c as r,b as i,m,n as c,t as l,d as p,f,g as u,h as d,o as h,r as g,k as x,p as b,q as y,j as M,u as v,v as j,x as w,y as $,C as k,D as C,w as _,H as I,G as z,B as A,as as D,z as E,A as P,E as S,I as T}from"./engine.js";import{c as q}from"./skybox.js";import{c as B,a as G}from"./polyhedron.js";import{c as H,a as L}from"./debug.js";import{l as F}from"./rgbe-loader.js";import{c as J,g as K,h as N,a as O,b as Q}from"./environment-map-texture.js";import{c as R}from"./specular.js";import{l as U,m as V,i as W,c as X}from"./gltf-loader.js";function Y(a){let s,t,d,h;return d=new e({}),{c(){s=o("canvas"),t=n(),r(d.$$.fragment)},m(e,o){i(e,s,o),a[1](s),i(e,t,o),m(d,e,o),h=!0},p:c,i(a){h||(l(d.$$.fragment,a),h=!0)},o(a){p(d.$$.fragment,a),h=!1},d(e){e&&(f(s),f(t)),a[1](null),u(d,e)}}}function Z(){}function aa(a,s,t){let e,o,n,r,i,m,c;return d(a,g,(a=>t(4,e=a))),d(a,x,(a=>t(5,o=a))),d(a,b,(a=>t(6,n=a))),d(a,y,(a=>t(7,r=a))),d(a,M,(a=>t(8,i=a))),h((async()=>{v(g,e={...e,canvas:m,backgroundColor:j,ambientLightColor:[16777215,.1],toneMappings:[J({exposure:1})]},e),v(M,i={...i,position:[0,0,10],target:[2,0,-1],fov:50},i),c=await F("christmas_photo_studio_01_4k.hdr");const a=K(1),s=await q({typedArray:c.data,convertToCube:N,width:c.width,height:c.height,cubeSize:2048,toneMapping:a}),t=O(c);v(y,r=[s,t],r);const l=B(2,5,G),p=w($()),f=_({diffuse:[1,0,0],metalness:0,program:L()});H({...l,matrix:p,material:f}),k(C({position:[-2,2,2],color:[1,1,1],intensity:5,cutoffDistance:0,decayExponent:2}));const u=Q({envMap:t.getTexture,width:t.width,height:t.height,lodMax:t.lodMax});_({diffuse:[1,1,1],metalness:1,specular:R({roughness:.05,ior:1.5,intensity:1,color:[1,1,1]}),envMap:u});const d=await U("models/gamefont-a.gltf","models/gamefont-a.bin"),h=V(d.scene).find(W),T=X(d,h),Y=_({metalness:.95,specular:R({roughness:.08,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,215/255,0],envMap:u}),aa=_({metalness:0,specular:R({roughness:.08,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,215/255,0],envMap:u}),sa=w($());I(sa,sa,[8,8,8]),z(sa,sa,Math.PI/4),A(sa,sa,Math.PI/2);const ta=D($(),sa);E(ta,ta,[.5,0,0]),v(b,n=[...n,aa,Y],n),v(x,o=[...o,P({...T,matrix:sa,material:aa}),P({...T,matrix:ta,material:Y})],o),v(g,e={...e,loop:Z,enabled:!0},e),S(m,M)})),[m,function(a){T[a?"unshift":"push"]((()=>{m=a,t(0,m)}))}]}class sa extends a{constructor(a){super(),s(this,a,aa,Y,t,{})}}export{sa as default};
