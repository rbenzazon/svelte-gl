import{S as a,i as s,s as t,M as e,e as o,a as n,c as r,b as i,m,n as c,t as l,d as p,f as u,g as f,h,o as d,r as g,k as x,p as b,q as M,j as v,u as w,v as y,w as j,x as $,y as k,H as C,G as I,B as z,as as A,z as P,A as S,E as T,I as q}from"./engine.js";import{c as B}from"./skybox.js";import{l as E}from"./rgbe-loader.js";import{c as G,g as H,h as L,a as D,b as F}from"./environment-map-texture.js";import{c as J}from"./specular.js";import{l as K,m as N,i as O,c as Q}from"./gltf-loader.js";function R(a){let s,t,h,d;return h=new e({}),{c(){s=o("canvas"),t=n(),r(h.$$.fragment)},m(e,o){i(e,s,o),a[1](s),i(e,t,o),m(h,e,o),d=!0},p:c,i(a){d||(l(h.$$.fragment,a),d=!0)},o(a){p(h.$$.fragment,a),d=!1},d(e){e&&(u(s),u(t)),a[1](null),f(h,e)}}}function U(){}function V(a,s,t){let e,o,n,r,i,m,c;return h(a,g,(a=>t(4,e=a))),h(a,x,(a=>t(5,o=a))),h(a,b,(a=>t(6,n=a))),h(a,M,(a=>t(7,r=a))),h(a,v,(a=>t(8,i=a))),d((async()=>{w(g,e={...e,canvas:m,backgroundColor:y,ambientLightColor:[16777215,.1],toneMappings:[G({exposure:1})]},e),w(v,i={...i,position:[0,0,10],target:[2,0,-1],fov:50},i),c=await E("skyboxes/christmas-photo-studio-01-4k.hdr");const a=H(1),s=await B({typedArray:c.data,convertToCube:L,width:c.width,height:c.height,cubeSize:2048,toneMapping:a}),t=D(c);w(M,r=[s,t],r);const l=F({envMap:t.getTexture,width:t.width,height:t.height,lodMax:t.lodMax}),p=await K("models/gamefont-a.gltf","models/gamefont-a.bin"),u=N(p.scene).find(O),f=Q(p,u),h=j({metalness:.95,specular:J({roughness:.08,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,215/255,0],envMap:l}),d=j({metalness:0,specular:J({roughness:.08,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,215/255,0],envMap:l}),q=$(k());C(q,q,[8,8,8]),I(q,q,Math.PI/4),z(q,q,Math.PI/2);const R=A(k(),q);P(R,R,[.5,0,0]),w(b,n=[...n,d,h],n),w(x,o=[...o,S({...f,matrix:q,material:d}),S({...f,matrix:R,material:h})],o),w(g,e={...e,loop:U,enabled:!0},e),T(m,v)})),[m,function(a){q[a?"unshift":"push"]((()=>{m=a,t(0,m)}))}]}class W extends a{constructor(a){super(),s(this,a,V,R,t,{})}}export{W as default};
