import{S as a,i as s,s as t,M as e,e as o,a as n,c as r,b as i,m,n as c,t as l,d as g,f as p,g as u,h as f,o as h,r as d,j as b,k as x,q as w,p as M,A as y,B as v,H as j,y as $,z as k,w as I,K as C,I as z,as as A,x as P,E as S,F as T,G as q}from"./engine.js";import{c as B}from"./skybox.js";import{l as E}from"./rgbe-loader.js";import{c as F,g as G,h as H,a as K,b as L}from"./environment-map-texture.js";import{c as D}from"./specular.js";import{l as J,m as N,i as O,b as Q}from"./gltf-loader.js";function R(a){let s,t,f,h;return f=new e({}),{c(){s=o("canvas"),t=n(),r(f.$$.fragment)},m(e,o){i(e,s,o),a[1](s),i(e,t,o),m(f,e,o),h=!0},p:c,i(a){h||(l(f.$$.fragment,a),h=!0)},o(a){g(f.$$.fragment,a),h=!1},d(e){e&&(p(s),p(t)),a[1](null),u(f,e)}}}function U(){}function V(a,s,t){let e,o,n,r,i,m,c;return f(a,d,(a=>t(4,e=a))),f(a,b,(a=>t(5,o=a))),f(a,x,(a=>t(6,n=a))),f(a,w,(a=>t(7,r=a))),f(a,M,(a=>t(8,i=a))),h((async()=>{y(d,e={...e,canvas:m,backgroundColor:v,ambientLightColor:[16777215,.1],toneMappings:[F({exposure:1})]},e),y(M,i={...i,position:[0,0,10],target:[2,0,-1],fov:50},i),c=await E("skyboxes/christmas-photo-studio-01-4k.hdr"),console.log("rgbeImage",c);const a=G(1),s=await B({typedArray:c.data,convertToCube:H,width:c.width,height:c.height,cubeSize:2048,toneMapping:a}),t=K(c);y(w,r=[s,t],r);const l=L({envMap:t.getTexture,width:t.width,height:t.height,lodMax:t.lodMax}),g=await J("models/gamefont-a.gltf","models/gamefont-a.bin"),p=N(g.scene).find(O),u=Q(g,p),f=j({metalness:.95,specular:D({roughness:.08,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,215/255,0],envMap:l}),h=j({metalness:0,specular:D({roughness:.08,ior:1.4,intensity:.8,color:[1,1,1]}),diffuse:[1,215/255,0],envMap:l}),q=$(k());I(q,q,[8,8,8]),C(q,q,Math.PI/4),z(q,q,Math.PI/2);const R=A(k(),q);P(R,R,[.5,0,0]),y(x,n=[...n,h,f],n),y(b,o=[...o,S({...u,matrix:q,material:h}),S({...u,matrix:R,material:f})],o),y(d,e={...e,loop:U,enabled:!0},e),T(m,M)})),[m,function(a){q[a?"unshift":"push"]((()=>{m=a,t(0,m)}))}]}new class extends a{constructor(a){super(),s(this,a,V,R,t,{})}}({target:document.body});
