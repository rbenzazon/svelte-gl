import{I as t,J as s,K as a,L as e,y as n,z as o,S as r,i,s as c,M as l,e as p,a as f,c as u,b as h,m,n as d,t as w,d as y,f as x,g as F,h as g,o as v,r as $,l as b,j,k as A,p as E,q as I,x as M,A as B,B as W,C as k,D as C,N as D,w as J,H as L,E as O,F as T,G as q}from"./Menu-C4XSDfXF.js";import{c as z}from"./plane-BuhpfAmh.js";import{c as G}from"./texture-D-LL34uK.js";import{c as H}from"./contact-shadow-gFdF1Tbu.js";async function K(r){try{const i=await fetch(r);if(!i.ok)throw new Error(`Failed to fetch OBJ file: ${i.statusText}`);const c=await i.text();return await async function(r,i){const c=r.split("\n"),l=[],p=[],f=[],u=[],h=[];for(let e=0;e<c.length;e++){const n=c[e];if(n.startsWith("v ")){const[,t,s,a]=n.split(" ");l.push(parseFloat(t),parseFloat(s),parseFloat(a))}if(n.startsWith("vn ")){const[,t,s,a]=n.split(" ");f.push(parseFloat(t),parseFloat(s),parseFloat(a))}if(n.startsWith("vt ")){const[,t,s]=n.split(" ");u.push(parseFloat(t),parseFloat(s))}if(n.startsWith("f ")){const[,e,o,r]=n.split(" "),i=3*(parseInt(e)-1),c=3*(parseInt(o)-1),u=3*(parseInt(r)-1),h=[l[i],l[i+1],l[i+2]],m=[l[c],l[c+1],l[c+2]],d=[l[u],l[u+1],l[u+2]];p.push(...h),p.push(...m),p.push(...d);const w=t([],s([],d,m),s([],h,m));a(w,w),f.push(...w,...w,...w)}}return{attributes:{positions:new Float32Array(p),normals:new Float32Array(f),...u.length>0&&{uvs:new Float32Array(u)},...h.length>0&&{elements:new Uint16Array(h)}},drawMode:e[4],material:{diffuse:[1,1,1],metalness:0},matrix:n(o())}}(c)}catch(t){console.error("Error loading OBJ file:",t)}}function N(t){let s,a,e,n;return e=new l({}),{c(){s=p("canvas"),a=f(),u(e.$$.fragment)},m(o,r){h(o,s,r),t[1](s),h(o,a,r),m(e,o,r),n=!0},p:d,i(t){n||(w(e.$$.fragment,t),n=!0)},o(t){y(e.$$.fragment,t),n=!1},d(n){n&&(x(s),x(a)),t[1](null),F(e,n)}}}function P(){}function S(t,s,a){let e,r,i,c,l,p,f;return g(t,$,(t=>a(2,e=t))),g(t,b,(t=>a(3,r=t))),g(t,j,(t=>a(4,i=t))),g(t,A,(t=>a(5,c=t))),g(t,E,(t=>a(6,l=t))),g(t,I,(t=>a(7,p=t))),v((async()=>{const t=n(o());M(t,t,[0,-1.5,0]),B($,e={...e,canvas:f,backgroundColor:W,ambientLightColor:[16777215,.1]},e);const s=H(t,1,10,10,1024,128,.5),{getTexture:a}=s;B(I,p=[s],p),B(E,l={...l,position:[0,5,-5],target:[0,2,0],fov:75},l);const u=k(C({position:[-2,3,-3],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),h=k(C({position:[2,-1,-1],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),m=z(10,10,1,1),d=await G({textureBuffer:a,type:"diffuse"}),w=L({diffuse:[1,1,1],metalness:0,diffuseMap:d,transparent:!0}),y=await K("venus.obj"),x=n(o());D(x,x,Math.PI),J(x,x,[.003,.003,.003]),M(x,x,[0,-450,0]);const F=L(y.material);B(A,c=[...c,F,w],c),B(j,i=[...i,O({...m,matrix:t,material:w}),O({...y,matrix:x,material:F})],i),B(b,r=[...r,u,h],r),B($,e={...e,loop:P,enabled:!0},e),T(f,E)})),[f,function(t){q[t?"unshift":"push"]((()=>{f=t,a(0,f)}))}]}class U extends r{constructor(t){super(),i(this,t,S,N,c,{})}}export{U as default};
