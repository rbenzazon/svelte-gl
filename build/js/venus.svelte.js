import{F as t,x as a,G as s,H as e,I as r,S as n,i as o,s as i,M as l,e as c,a as u,c as p,b as f,m,n as h,t as x,d,f as w,g as y,h as F,o as g,r as b,l as v,j as A,k as $,p as j,w as E,y as I,z as M,A as B,B as W,v as k,J as C,C as D,D as J,E as O}from"./Menu-z2xJb2L1.js";import{c as T}from"./plane-CJx9FycI.js";import{c as z}from"./texture-B3n45YCS.js";import{c as G}from"./contact-shadow-BlCuqjAk.js";async function H(n){try{const o=await fetch(n);if(!o.ok)throw new Error(`Failed to fetch OBJ file: ${o.statusText}`);const i=await o.text();return await async function(n,o){const i=n.split("\n"),l=[],c=[],u=[],p=[],f=[],m={attributes:{},drawMode:t[4],material:{diffuse:[1,1,1],metalness:0},matrix:a(new Float32Array(16))};for(let t=0;t<i.length;t++){const a=i[t];if(a.startsWith("v ")){const[,t,s,e]=a.split(" ");l.push(parseFloat(t),parseFloat(s),parseFloat(e))}if(a.startsWith("vn ")){const[,t,s,e]=a.split(" ");u.push(parseFloat(t),parseFloat(s),parseFloat(e))}if(a.startsWith("vt ")){const[,t,s]=a.split(" ");p.push(parseFloat(t),parseFloat(s))}if(a.startsWith("f ")){const[,t,n,o]=a.split(" "),i=3*(parseInt(t)-1),p=3*(parseInt(n)-1),f=3*(parseInt(o)-1),m=[l[i],l[i+1],l[i+2]],h=[l[p],l[p+1],l[p+2]],x=[l[f],l[f+1],l[f+2]];c.push(...m),c.push(...h),c.push(...x);const d=s([],e([],x,h),e([],m,h));r(d,d),u.push(...d,...d,...d)}}c.length>0&&(m.attributes.positions=new Float32Array(c));u.length>0&&(m.attributes.normals=new Float32Array(u));p.length>0&&(m.attributes.uvs=new Float32Array(p));f.length>0&&(m.attributes.elements=new Uint16Array(f),console.log("indices used",f.slice(0,3)));return m}(i)}catch(t){console.error("Error loading OBJ file:",t)}}function L(t){let a,s,e,r;return e=new l({}),{c(){a=c("canvas"),s=u(),p(e.$$.fragment)},m(n,o){f(n,a,o),t[1](a),f(n,s,o),m(e,n,o),r=!0},p:h,i(t){r||(x(e.$$.fragment,t),r=!0)},o(t){d(e.$$.fragment,t),r=!1},d(r){r&&(w(a),w(s)),t[1](null),y(e,r)}}}function P(){}function S(t,s,e){let r,n,o,i,l,c;return F(t,b,(t=>e(2,r=t))),F(t,v,(t=>e(3,n=t))),F(t,A,(t=>e(4,o=t))),F(t,$,(t=>e(5,i=t))),F(t,j,(t=>e(6,l=t))),g((async()=>{const t=a(new Float32Array(16));E(t,t,[0,-1.5,0]),I(b,r={...r,canvas:c,backgroundColor:M,ambientLightColor:[16777215,.1]},r);const s=G(t,1,10,10,1024,128,.5),{getTexture:e}=s;I(j,l=[s],l),I($,i={position:[0,5,-5],target:[0,2,0],fov:75},i);const u=B(W({position:[-2,3,-3],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),p=B(W({position:[2,-1,-1],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),f=a(new Float32Array(16));E(f,f,[3,0,0]),k(f,f,[.1,.1,.1]);const m=T(10,10,1,1),h={diffuse:[1,1,1],metalness:0,diffuseMap:await z({textureBuffer:e,type:"diffuse"}),transparent:!0},x=await H("venus.obj");x.matrix=C(x.matrix,x.matrix,Math.PI),x.matrix=k(x.matrix,x.matrix,[.003,.003,.003]),x.matrix=E(x.matrix,x.matrix,[0,-450,0]),I(A,o=[...o,D({...m,matrix:t,material:h}),D(x)],o),I(v,n=[...n,u,p],n),I(b,r={...r,loop:P,enabled:!0},r),J(c,$)})),[c,function(t){O[t?"unshift":"push"]((()=>{c=t,e(0,c)}))}]}class U extends n{constructor(t){super(),o(this,t,S,L,i,{})}}export{U as default};
