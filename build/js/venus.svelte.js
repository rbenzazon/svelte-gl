import{N as t,O as s,P as a,Q as e,v as n,w as o,S as r,i,s as c,M as l,e as p,a as f,c as u,b as m,m as h,n as d,t as y,d as w,f as g,g as x,h as F,o as v,r as j,l as $,j as b,k as E,p as A,K as B,x as D,q as I,u as M,y as W,z as k,F as C,C as O,E as J,A as P,B as T,D as q}from"./engine-CfSrEngR.js";import{c as z}from"./plane-BeisbDud.js";import{c as K}from"./texture-3VWbGOMU.js";import{c as L}from"./contact-shadow-BmBlW3xB.js";import{c as N}from"./specular-DZzjg2qv.js";async function Q(r){try{const i=await fetch(r);if(!i.ok)throw new Error(`Failed to fetch OBJ file: ${i.statusText}`);const c=await i.text();return await async function(r,i){const c=r.split("\n"),l=[],p=[],f=[],u=[],m=[];for(let e=0;e<c.length;e++){const n=c[e];if(n.startsWith("v ")){const[,t,s,a]=n.split(" ");l.push(parseFloat(t),parseFloat(s),parseFloat(a))}if(n.startsWith("vn ")){const[,t,s,a]=n.split(" ");f.push(parseFloat(t),parseFloat(s),parseFloat(a))}if(n.startsWith("vt ")){const[,t,s]=n.split(" ");u.push(parseFloat(t),parseFloat(s))}if(n.startsWith("f ")){const[,e,o,r]=n.split(" "),i=3*(parseInt(e)-1),c=3*(parseInt(o)-1),u=3*(parseInt(r)-1),m=[l[i],l[i+1],l[i+2]],h=[l[c],l[c+1],l[c+2]],d=[l[u],l[u+1],l[u+2]];p.push(...m),p.push(...h),p.push(...d);const y=t([],s([],d,h),s([],m,h));a(y,y),f.push(...y,...y,...y)}}return{attributes:{positions:new Float32Array(p),normals:new Float32Array(f),...u.length>0&&{uvs:new Float32Array(u)},...m.length>0&&{elements:new Uint16Array(m)}},drawMode:e[4],material:{diffuse:[1,1,1],metalness:0},matrix:n(o())}}(c)}catch(t){console.error("Error loading OBJ file:",t)}}function S(t){let s,a,e,n;return e=new l({}),{c(){s=p("canvas"),a=f(),u(e.$$.fragment)},m(o,r){m(o,s,r),t[1](s),m(o,a,r),h(e,o,r),n=!0},p:d,i(t){n||(y(e.$$.fragment,t),n=!0)},o(t){w(e.$$.fragment,t),n=!1},d(n){n&&(g(s),g(a)),t[1](null),x(e,n)}}}function U(){}function G(t,s,a){let e,r,i,c,l,p,f;return F(t,j,(t=>a(2,e=t))),F(t,$,(t=>a(3,r=t))),F(t,b,(t=>a(4,i=t))),F(t,E,(t=>a(5,c=t))),F(t,A,(t=>a(6,l=t))),F(t,B,(t=>a(7,p=t))),v((async()=>{const t=n(o());D(t,t,[0,-1.5,0]),I(j,e={...e,canvas:f,backgroundColor:M,ambientLightColor:[16777215,.15]},e);const s=L(t,1,10,10,1024,128,.5),{getTexture:a}=s;I(B,p=[s],p),I(A,l={...l,position:[0,5,-5],target:[0,2,0],fov:75},l);const u=W(k({position:[-2,3,-3],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),m=W(k({position:[2,-1,-1],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),h=W(k({position:[-1,3,4],color:[1,1,1],intensity:10,cutoffDistance:0,decayExponent:2})),d=z(10,10,1,1),y=await K({textureBuffer:a,type:"diffuse"}),w=J({diffuse:[1,1,1],metalness:0,diffuseMap:y,transparent:!0}),g=await Q("venus.obj"),x=n(o());C(x,x,Math.PI),O(x,x,[.003,.003,.003]),D(x,x,[0,-450,0]);const F=J({...g.material,specular:N({roughness:.45,ior:1.5,intensity:1,color:[1,1,1]})});I(E,c=[...c,F,w],c),I(b,i=[...i,P({...d,matrix:t,material:w}),P({...g,matrix:x,material:F})],i),I($,r=[...r,u,m,h],r),I(j,e={...e,loop:U,enabled:!0},e),T(f,A)})),[f,function(t){q[t?"unshift":"push"]((()=>{f=t,a(0,f)}))}]}class H extends r{constructor(t){super(),i(this,t,G,S,c,{})}}export{H as default};
