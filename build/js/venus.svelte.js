import{H as t,y as a,I as s,J as r,K as e,S as n,i as o,s as i,M as l,e as c,a as p,c as u,b as f,m,n as h,t as x,d as w,f as d,g as y,h as F,o as g,r as b,l as v,j as A,k as $,p as j,q as E,x as I,z as M,A as B,B as W,C as k,w as C,L as D,G as J,D as L,E as O,F as T}from"./Menu-Bv-e-usE.js";import{c as q}from"./plane-B0ZG1sOQ.js";import{c as z}from"./texture-Cx8qqlgN.js";import{c as G}from"./contact-shadow-CoAfOPDf.js";async function H(n){try{const o=await fetch(n);if(!o.ok)throw new Error(`Failed to fetch OBJ file: ${o.statusText}`);const i=await o.text();return await async function(n,o){const i=n.split("\n"),l=[],c=[],p=[],u=[],f=[],m={attributes:{},drawMode:t[4],material:{diffuse:[1,1,1],metalness:0},matrix:a(new Float32Array(16))};for(let t=0;t<i.length;t++){const a=i[t];if(a.startsWith("v ")){const[,t,s,r]=a.split(" ");l.push(parseFloat(t),parseFloat(s),parseFloat(r))}if(a.startsWith("vn ")){const[,t,s,r]=a.split(" ");p.push(parseFloat(t),parseFloat(s),parseFloat(r))}if(a.startsWith("vt ")){const[,t,s]=a.split(" ");u.push(parseFloat(t),parseFloat(s))}if(a.startsWith("f ")){const[,t,n,o]=a.split(" "),i=3*(parseInt(t)-1),u=3*(parseInt(n)-1),f=3*(parseInt(o)-1),m=[l[i],l[i+1],l[i+2]],h=[l[u],l[u+1],l[u+2]],x=[l[f],l[f+1],l[f+2]];c.push(...m),c.push(...h),c.push(...x);const w=s([],r([],x,h),r([],m,h));e(w,w),p.push(...w,...w,...w)}}c.length>0&&(m.attributes.positions=new Float32Array(c));p.length>0&&(m.attributes.normals=new Float32Array(p));u.length>0&&(m.attributes.uvs=new Float32Array(u));f.length>0&&(m.attributes.elements=new Uint16Array(f));return m}(i)}catch(t){console.error("Error loading OBJ file:",t)}}function K(t){let a,s,r,e;return r=new l({}),{c(){a=c("canvas"),s=p(),u(r.$$.fragment)},m(n,o){f(n,a,o),t[1](a),f(n,s,o),m(r,n,o),e=!0},p:h,i(t){e||(x(r.$$.fragment,t),e=!0)},o(t){w(r.$$.fragment,t),e=!1},d(e){e&&(d(a),d(s)),t[1](null),y(r,e)}}}function P(){}function S(t,s,r){let e,n,o,i,l,c,p;return F(t,b,(t=>r(2,e=t))),F(t,v,(t=>r(3,n=t))),F(t,A,(t=>r(4,o=t))),F(t,$,(t=>r(5,i=t))),F(t,j,(t=>r(6,l=t))),F(t,E,(t=>r(7,c=t))),g((async()=>{const t=a(new Float32Array(16));I(t,t,[0,-1.5,0]),M(b,e={...e,canvas:p,backgroundColor:B,ambientLightColor:[16777215,.1]},e);const s=G(t,1,10,10,1024,128,.5),{getTexture:r}=s;M(E,c=[s],c),M(j,l={position:[0,5,-5],target:[0,2,0],fov:75},l);const u=W(k({position:[-2,3,-3],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),f=W(k({position:[2,-1,-1],color:[1,1,1],intensity:20,cutoffDistance:0,decayExponent:2})),m=a(new Float32Array(16));I(m,m,[3,0,0]),C(m,m,[.1,.1,.1]);const h=q(10,10,1,1),x=await z({textureBuffer:r,type:"diffuse"}),w=J({diffuse:[1,1,1],metalness:0,diffuseMap:x,transparent:!0}),d=await H("venus.obj");d.matrix=D(d.matrix,d.matrix,Math.PI),d.matrix=C(d.matrix,d.matrix,[.003,.003,.003]),d.matrix=I(d.matrix,d.matrix,[0,-450,0]);const y=J(d.material);d.material=y,M($,i=[...i,y,w],i),M(A,o=[...o,L({...h,matrix:t,material:w}),L(d)],o),M(v,n=[...n,u,f],n),M(b,e={...e,loop:P,enabled:!0},e),O(p,j)})),[p,function(t){T[t?"unshift":"push"]((()=>{p=t,r(0,p)}))}]}class U extends n{constructor(t){super(),o(this,t,S,K,i,{})}}export{U as default};
