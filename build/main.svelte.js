function t(){}function n(t){return t()}function o(){return Object.create(null)}function e(t){t.forEach(n)}function r(t){return"function"==typeof t}function i(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function a(n,...o){if(null==n){for(const t of o)t(void 0);return t}const e=n.subscribe(...o);return e.unsubscribe?()=>e.unsubscribe():e}function s(t){let n;return a(t,(t=>n=t))(),n}function c(t,n,o){t.$$.on_destroy.push(a(n,o))}function u(t){t.parentNode&&t.parentNode.removeChild(t)}let l;function f(t){l=t}function g(t){(function(){if(!l)throw new Error("Function called outside component initialization");return l})().$$.on_mount.push(t)}const h=[],d=[];let m=[];const p=[],v=Promise.resolve();let b=!1;function _(t){m.push(t)}const y=new Set;let A=0;function $(){if(0!==A)return;const t=l;do{try{for(;A<h.length;){const t=h[A];A++,f(t),L(t.$$)}}catch(t){throw h.length=0,A=0,t}for(f(null),h.length=0,A=0;d.length;)d.pop()();for(let t=0;t<m.length;t+=1){const n=m[t];y.has(n)||(y.add(n),n())}m.length=0}while(h.length);for(;p.length;)p.pop()();b=!1,y.clear(),f(t)}function L(t){if(null!==t.fragment){t.update(),e(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(_)}}const w=new Set;function x(t,n){const o=t.$$;null!==o.fragment&&(!function(t){const n=[],o=[];m.forEach((e=>-1===t.indexOf(e)?n.push(e):o.push(e))),o.forEach((t=>t())),m=n}(o.after_update),e(o.on_destroy),o.fragment&&o.fragment.d(n),o.on_destroy=o.fragment=null,o.ctx=[])}function R(t,n){-1===t.$$.dirty[0]&&(h.push(t),b||(b=!0,v.then($)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function E(i,a,s,c,g,h,d=null,m=[-1]){const p=l;f(i);const v=i.$$={fragment:null,ctx:[],props:h,update:t,not_equal:g,bound:o(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(a.context||(p?p.$$.context:[])),callbacks:o(),dirty:m,skip_bound:!1,root:a.target||p.$$.root};d&&d(v.root);let b=!1;if(v.ctx=s?s(i,a.props||{},((t,n,...o)=>{const e=o.length?o[0]:n;return v.ctx&&g(v.ctx[t],v.ctx[t]=e)&&(!v.skip_bound&&v.bound[t]&&v.bound[t](e),b&&R(i,t)),n})):[],v.update(),b=!0,e(v.before_update),v.fragment=!!c&&c(v.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);v.fragment&&v.fragment.l(t),t.forEach(u)}else v.fragment&&v.fragment.c();a.intro&&((y=i.$$.fragment)&&y.i&&(w.delete(y),y.i(A))),function(t,o,i){const{fragment:a,after_update:s}=t.$$;a&&a.m(o,i),_((()=>{const o=t.$$.on_mount.map(n).filter(r);t.$$.on_destroy?t.$$.on_destroy.push(...o):e(o),t.$$.on_mount=[]})),s.forEach(_)}(i,a.target,a.anchor),$()}var y,A;f(p)}class F{$$=void 0;$$set=void 0;$destroy(){x(this,1),this.$destroy=t}$on(n,o){if(!r(o))return t;const e=this.$$.callbacks[n]||(this.$$.callbacks[n]=[]);return e.push(o),()=>{const t=e.indexOf(o);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}"undefined"!=typeof window&&(window.__svelte||(window.__svelte={v:new Set})).v.add("4");var M=1e-6,T="undefined"!=typeof Float32Array?Float32Array:Array;function P(){var t=new T(16);return T!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function S(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function C(t,n){if(t===n){var o=n[1],e=n[2],r=n[3],i=n[6],a=n[7],s=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=o,t[6]=n[9],t[7]=n[13],t[8]=e,t[9]=i,t[11]=n[14],t[12]=r,t[13]=a,t[14]=s}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t}function B(t,n){var o=n[0],e=n[1],r=n[2],i=n[3],a=n[4],s=n[5],c=n[6],u=n[7],l=n[8],f=n[9],g=n[10],h=n[11],d=n[12],m=n[13],p=n[14],v=n[15],b=o*s-e*a,_=o*c-r*a,y=o*u-i*a,A=e*c-r*s,$=e*u-i*s,L=r*u-i*c,w=l*m-f*d,x=l*p-g*d,R=l*v-h*d,E=f*p-g*m,F=f*v-h*m,M=g*v-h*p,T=b*M-_*F+y*E+A*R-$*x+L*w;return T?(T=1/T,t[0]=(s*M-c*F+u*E)*T,t[1]=(r*F-e*M-i*E)*T,t[2]=(m*L-p*$+v*A)*T,t[3]=(g*$-f*L-h*A)*T,t[4]=(c*R-a*M-u*x)*T,t[5]=(o*M-r*R+i*x)*T,t[6]=(p*y-d*L-v*_)*T,t[7]=(l*L-g*y+h*_)*T,t[8]=(a*F-s*R+u*w)*T,t[9]=(e*R-o*F-i*w)*T,t[10]=(d*$-m*y+v*b)*T,t[11]=(f*y-l*$-h*b)*T,t[12]=(s*x-a*E-c*w)*T,t[13]=(o*E-e*x+r*w)*T,t[14]=(m*_-d*A-p*b)*T,t[15]=(l*A-f*_+g*b)*T,t):null}Math.hypot||(Math.hypot=function(){for(var t=0,n=arguments.length;n--;)t+=arguments[n]*arguments[n];return Math.sqrt(t)});var I=function(t,n,o,e,r){var i,a=1/Math.tan(n/2);return t[0]=a/o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=r&&r!==1/0?(i=1/(e-r),t[10]=(r+e)*i,t[14]=2*r*e*i):(t[10]=-1,t[14]=-2*e),t};const U=[];function N(n,o=t){let e;const r=new Set;function a(t){if(i(n,t)&&(n=t,e)){const t=!U.length;for(const t of r)t[1](),U.push(t,n);if(t){for(let t=0;t<U.length;t+=2)U[t][0](U[t+1]);U.length=0}}}function s(t){a(t(n))}return{set:a,update:s,subscribe:function(i,c=t){const u=[i,c];return r.add(u),1===r.size&&(e=o(a,s)||t),i(n),()=>{r.delete(u),0===r.size&&e&&(e(),e=null)}}}}function O(n,o,i){const s=!Array.isArray(n),c=s?[n]:n;if(!c.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const u=o.length<2;return l=(n,i)=>{let l=!1;const f=[];let g=0,h=t;const d=()=>{if(g)return;h();const e=o(s?f[0]:f,n,i);u?n(e):h=r(e)?e:t},m=c.map(((t,n)=>a(t,(t=>{f[n]=t,g&=~(1<<n),l&&d()}),(()=>{g|=1<<n}))));return l=!0,d(),function(){e(m),h(),l=!1}},{subscribe:N(i,l).subscribe};var l}const k=(t,n)=>((t,n)=>o=>Function.constructor(...t,`return \`${n}\``)(...o))(Object.keys(t),n)(Object.values(t)),D=Math.PI/180;function H(t){return function(){const n=(t=s(t)).gl,o=t.program,e=t.worldMatrix,r=n.getUniformLocation(o,"normalMatrix");t.normalMatrixLocation=r;let i=P();B(i,e),C(i,i),n.uniformMatrix4fv(r,!1,i)}}function j(t){return function(){const n=(t=s(t)).gl.createProgram();t.program=n}}function G(t){return function(){const n=(t=s(t)).gl,o=t.program;n.linkProgram(o),n.getProgramParameter(o,n.LINK_STATUS)||console.error("ERROR linking program!",n.getProgramInfoLog(o)),n.validateProgram(o),n.getProgramParameter(o,n.VALIDATE_STATUS)||console.error("ERROR validating program!",n.getProgramInfoLog(o)),n.useProgram(o)}}function Y(t,{color:n}){return function(){const o=(t=s(t)).gl,e=t.program;console.log("color",n,t.program,t.gl);const r=o.getUniformLocation(e,"color");o.uniform3fv(r,new Float32Array(n))}}function q(t,n){return function(){const o=(t=s(t)).gl,e=t.program,r=o.getUniformLocation(e,"projection"),i=n.fov*D;const a=t.canvas.width/t.canvas.height,c=n.near,u=n.far;let l=new Float32Array(16);l=I(l,i,a,c,u),o.uniformMatrix4fv(r,!1,l);const f=o.getUniformLocation(e,"view"),g=new Float32Array(16);var h,d,m,p,v,b,_,y,A,$,L,w,x,R,E,F,T,P,C,B,U,N,O;h=g,d=n.position,m=n.target,p=n.up,E=d[0],F=d[1],T=d[2],P=p[0],C=p[1],B=p[2],U=m[0],N=m[1],O=m[2],Math.abs(E-U)<M&&Math.abs(F-N)<M&&Math.abs(T-O)<M?S(h):(L=E-U,w=F-N,x=T-O,v=C*(x*=R=1/Math.hypot(L,w,x))-B*(w*=R),b=B*(L*=R)-P*x,_=P*w-C*L,(R=Math.hypot(v,b,_))?(v*=R=1/R,b*=R,_*=R):(v=0,b=0,_=0),y=w*_-x*b,A=x*v-L*_,$=L*b-w*v,(R=Math.hypot(y,A,$))?(y*=R=1/R,A*=R,$*=R):(y=0,A=0,$=0),h[0]=v,h[1]=y,h[2]=L,h[3]=0,h[4]=b,h[5]=A,h[6]=w,h[7]=0,h[8]=_,h[9]=$,h[10]=x,h[11]=0,h[12]=-(v*E+b*F+_*T),h[13]=-(y*E+A*F+$*T),h[14]=-(L*E+w*F+x*T),h[15]=1),o.uniformMatrix4fv(f,!1,g)}}function z(t,n){return function(){const o=(t=s(t)).gl,e=t.program,r=n.filter((t=>"point"===t.type)),i=o.getUniformLocation(e,"pointLightPositions[0]"),a=r.reduce(((t,n)=>[...t,...n.position]),[]);o.uniform3fv(i,new Float32Array(a));const c=o.getUniformLocation(e,"pointLightColors[0]"),u=r.reduce(((t,n)=>[...t,...n.color]),[]);o.uniform3fv(c,new Float32Array(u));const l=o.getUniformLocation(e,"pointLightIntensities[0]"),f=r.reduce(((t,n)=>[...t,n.intensity]),[]);o.uniform1fv(l,new Float32Array(f))}}function W(t,n){return function(){const o=(t=s(t)).gl,e=t.program;n||S(n=new Float32Array(16)),t.worldMatrix=n;const r=o.getUniformLocation(e,"world");o.uniformMatrix4fv(r,!1,n)}}const V=function(){const{subscribe:t,set:n,update:o}=N({backgroundColor:[2.55,2.55,2.55,1],canvas:null,camera:null,meshes:[],lights:[],loop:null});return{subscribe:t,setCamera:(t,n,e,r,i,a)=>o((o=>(o.camera={fov:t,near:n,far:e,position:r,target:i,up:a},o))),addMesh:t=>o((n=>(n.meshes=[...n.meshes,t],n))),addLight:t=>o((n=>(n.lights=[...n.lights,t],n))),setLoop:t=>o((n=>(n.loop=t,n))),setCanvas:t=>o((n=>(n.canvas=t,n))),setBackgroundColor:t=>o((n=>(n.backgroundColor=t,n)))}}(),K=new Float32Array(16);S(K);const X=(()=>{const{subscribe:t,set:n}=N(K);return{subscribe:t,set:t=>(n(t),Z&&s(Z).program&&(1===s(J).length?function(t,n){const o=(t=s(t)).gl,e=t.program,r=o.getUniformLocation(e,"world");o.uniformMatrix4fv(r,!1,n)}(Z,t):Q.set({init:!1})),t)}})(),J=O(V,(t=>t.meshes.map((t=>({createProgram:j,mesh:t,material:t.material,attributes:t.attributes,uniforms:t.uniforms,createShaders:(t.material,t.attributes,t.uniforms,function(t){return function(){const n=(t=s(t)).gl,o=t.program,e=n.createShader(n.VERTEX_SHADER);n.shaderSource(e,"#version 300 es\nprecision mediump float;in vec3 position;in vec3 normal;uniform mat4 world;uniform mat4 view;uniform mat4 projection;uniform mat4 normalMatrix;out vec3 vertexColor;out vec3 vNormal;out vec3 vertex;void main(){vertexColor=vec3(1.27,1.27,1.27);vertex=vec3(world*vec4(position,1.0));vNormal=vec3(normalMatrix*vec4(normal,1.0));gl_Position=projection*view*world*vec4(position,1.0);}"),n.compileShader(e);const r=k({defines:(i={NUM_POINT_LIGHTS:t.numPointLights},["",...Object.entries(i).map((([t,n])=>`#define ${t} ${n}`))].join("\n"))},"#version 300 es\nprecision mediump float;${defines}\n#if NUM_POINT_LIGHTS > 0\nuniform vec3 pointLightPositions[NUM_POINT_LIGHTS];uniform vec3 pointLightColors[NUM_POINT_LIGHTS];uniform float pointLightIntensities[NUM_POINT_LIGHTS];\n#endif\nuniform vec3 lightPosition;uniform vec3 color;in vec3 vertex;in vec3 vNormal;in vec3 vertexColor;out vec4 fragColor;float calculateLightBrightness(vec3 lightPosition,vec3 lightColor,float lightIntensity,vec3 vertexPosition,vec3 normal){vec3 offset=lightPosition-vertexPosition;float distance=length(offset);vec3 direction=normalize(offset);float diffuse=max(dot(direction,normal),0.0);float attenuation=lightIntensity/(0.1+0.1*distance+0.1*distance*distance);float brightness=max(diffuse*attenuation,0.1);return brightness;}void main(){float totalBrightness=0.0;for(int i=0;i<NUM_POINT_LIGHTS;i++){totalBrightness+=calculateLightBrightness(pointLightPositions[i],pointLightColors[i],pointLightIntensities[i],vertex,vNormal);}/*vec3 offset=vec3(0.0,7.0,-3.0)-vertex;float distance=length(offset);vec3 direction=normalize(offset);float diffuse=max(dot(direction,vNormal),0.0);float attenuation=10.0/(0.1+0.1*distance+0.1*distance*distance);float brightness=max(diffuse*attenuation,0.1);*/fragColor=vec4(totalBrightness*color,1.0);}");var i;console.log("fragmentShaderSource",r);const a=n.createShader(n.FRAGMENT_SHADER);n.shaderSource(a,r),n.compileShader(a),n.attachShader(o,e),n.attachShader(o,a)}}),endProgramSetup:G})))));const Q=function(){const{subscribe:t,set:n}=N({init:!1});return{subscribe:t,set:n}}();const Z=function(){const{subscribe:t,update:n}=N({});return{subscribe:t,update:n}}(),tt=N(null),nt=O(X,(t=>{const n=P();B(n,t||K),C(n,n);const o=s(Z);if(!o.gl)return n;const e=o.gl,r=o.program,i=e.getUniformLocation(r,"normalMatrix");return e.uniformMatrix4fv(i,!1,n),n})),ot=O([V,J,X],(([t,n,o])=>{if(!(t&&n&&t.canvas&&0!==n.length&&t.camera&&0!==t.lights.length))return console.log("no renderer or programs or canvas"),[];let e={canvas:t.canvas,backgroundColor:t.backgroundColor,numPointLights:t.lights.filter((t=>"point"===t.type)).length};const r=[];var i;return!s(Q).init&&r.push(function(t,n){return function(){const o=t.canvas.getBoundingClientRect();t.canvas.width=o.width,t.canvas.height=o.height;const e=t.gl=t.canvas.getContext("webgl2");n.update((n=>({...n,...t}))),e.viewportWidth=t.canvas.width,e.viewportHeight=t.canvas.height,e.clearColor.apply(e,t.backgroundColor),e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_COLOR_BIT),e.enable(e.DEPTH_TEST),e.enable(e.CULL_FACE),e.frontFace(e.CCW),e.cullFace(e.BACK),Q.set({init:!0})}}(e,Z)),!s(Q).init&&r.push(...n.reduce(((n,o)=>{return tt.set(o),[...n,o.createProgram(Z),o.createShaders(Z),o.endProgramSetup(Z),...o.mesh.uniforms?.color?[Y(Z,o.uniforms)]:[],(e=Z,r=o.mesh,function(){const t=(e=s(e)).gl,n=e.program;e.attributeLength=r.attributes.elements?r.attributes.elements.length:r.attributes.positions.length/3;const o=new Float32Array(r.attributes.positions),i=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,i),t.bufferData(t.ARRAY_BUFFER,o,t.STATIC_DRAW);const a=t.getAttribLocation(n,"position");t.bindBuffer(t.ARRAY_BUFFER,i),t.vertexAttribPointer(a,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(a);const c=new Float32Array(r.attributes.normals),u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,c,t.STATIC_DRAW);const l=t.getAttribLocation(n,"normal");if(t.bindBuffer(t.ARRAY_BUFFER,u),t.vertexAttribPointer(l,3,t.FLOAT,!1,0,0),t.enableVertexAttribArray(l),r.attributes.elements){e.hasElements=!0;const n=new Uint16Array(r.attributes.elements),o=t.createBuffer();t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,o),t.bufferData(t.ELEMENT_ARRAY_BUFFER,n,t.STATIC_DRAW)}}),q(Z,t.camera),W(Z,s(X)),H(Z),z(Z,t.lights)];var e,r}),[])),r.push((i=Z,function(){const t=(i=s(i)).gl;t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),i.loop&&i.loop(),i.hasElements?t.drawElements(t.TRIANGLES,i.attributeLength,t.UNSIGNED_SHORT,0):t.drawArrays(t.TRIANGLES,0,i.attributeLength)})),r}));function et(t,n,o){return t[0]=n[0]-o[0],t[1]=n[1]-o[1],t[2]=n[2]-o[2],t}function rt(t,n){var o=n[0],e=n[1],r=n[2],i=o*o+e*e+r*r;return i>0&&(i=1/Math.sqrt(i)),t[0]=n[0]*i,t[1]=n[1]*i,t[2]=n[2]*i,t}function it(t,n,o){var e=n[0],r=n[1],i=n[2],a=o[0],s=o[1],c=o[2];return t[0]=r*c-i*s,t[1]=i*a-e*c,t[2]=e*s-r*a,t}function at(t,n,o,e){var r=n[0],i=n[1],a=n[2];return t[0]=r+e*(o[0]-r),t[1]=i+e*(o[1]-i),t[2]=a+e*(o[2]-a),t}var st;function ct(){return new Array(3).fill(0)}function ut(t){const n=[];for(let o=0;o<t.length;o+=9){const e=ct(),r=ct(),i=ct();e[0]=t[o],e[1]=t[o+1],e[2]=t[o+2],r[0]=t[o+3],r[1]=t[o+4],r[2]=t[o+5],i[0]=t[o+6],i[1]=t[o+7],i[2]=t[o+8];const a=ct();et(a,i,r);const s=ct();et(s,e,r);const c=ct();it(c,a,s),rt(c,c),n.push(...c,...c,...c)}return n}st=new T(3),T!=Float32Array&&(st[0]=0,st[1]=0,st[2]=0);const lt=(1+Math.sqrt(5))/2,ft=1/lt,gt=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-ft,-lt,0,-ft,lt,0,ft,-lt,0,ft,lt,-ft,-lt,0,-ft,lt,0,ft,-lt,0,ft,lt,0,-lt,0,-ft,lt,0,-ft,-lt,0,ft,lt,0,ft],ht=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];function dt(n){let o;return{c(){var t;t="canvas",o=document.createElement(t)},m(t,e){!function(t,n,o){t.insertBefore(n,o||null)}(t,o,e),n[3](o)},p:t,i:t,o:t,d(t){t&&u(o),n[3](null)}}}function mt(t,n,o){let e,r,i,a;function s(){const t=performance.now()/1e3/6*Math.PI,n=new Float32Array(16);var o;S(n),function(t,n,o){var e=Math.sin(o),r=Math.cos(o),i=n[0],a=n[1],s=n[2],c=n[3],u=n[8],l=n[9],f=n[10],g=n[11];n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=i*r-u*e,t[1]=a*r-l*e,t[2]=s*r-f*e,t[3]=c*r-g*e,t[8]=i*e+u*r,t[9]=a*e+l*r,t[10]=s*e+f*r,t[11]=c*e+g*r}(n,n,t),function(t,n,o){var e=Math.sin(o),r=Math.cos(o),i=n[4],a=n[5],s=n[6],c=n[7],u=n[8],l=n[9],f=n[10],g=n[11];n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=i*r+u*e,t[5]=a*r+l*e,t[6]=s*r+f*e,t[7]=c*r+g*e,t[8]=u*r-i*e,t[9]=l*r-a*e,t[10]=f*r-s*e,t[11]=g*r-c*e}(n,n,t),function(t,n,o){var e=Math.sin(o),r=Math.cos(o),i=n[0],a=n[1],s=n[2],c=n[3],u=n[4],l=n[5],f=n[6],g=n[7];n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=i*r+u*e,t[1]=a*r+l*e,t[2]=s*r+f*e,t[3]=c*r+g*e,t[4]=u*r-i*e,t[5]=l*r-a*e,t[6]=f*r-s*e,t[7]=g*r-c*e}(n,n,t),e=n,o=e,X.set(o),requestAnimationFrame(s)}return c(t,X,(t=>o(4,e=t))),c(t,nt,(t=>o(5,t))),c(t,tt,(t=>o(1,r=t))),c(t,ot,(t=>o(2,i=t))),g((()=>{const t=((t,n,o)=>{const e=[];!function(t){const n=ct(),o=ct(),e=ct();for(let r=0;r<ht.length;r+=3)i(ht[r+0],n),i(ht[r+1],o),i(ht[r+2],e),a(n,o,e,t)}(n),function(t){const n=ct();for(let i=0;i<e.length;i+=3)n[0]=e[i+0],n[1]=e[i+1],n[2]=e[i+2],rt(n,n),r=t,(o=n)[0]*=r,o[1]*=r,o[2]*=r,e[i+0]=n[0],e[i+1]=n[1],e[i+2]=n[2];var o,r}(t);let r=o(e);return{positions:e,normals:r};function i(t,n){const o=3*t;n[0]=gt[o+0],n[1]=gt[o+1],n[2]=gt[o+2]}function a(t,n,o,e){const r=e+1,i=[];for(let e=0;e<=r;e++){i[e]=[];let a=ct();at(a,[...t],o,e/r);let s=ct();at(s,[...n],o,e/r);const c=r-e;for(let t=0;t<=c;t++)if(0===t&&e===r)i[e][t]=a;else{let n=ct();at(n,[...a],s,t/c),i[e][t]=n}}for(let t=0;t<r;t++)for(let n=0;n<2*(r-t)-1;n++){const o=Math.floor(n/2);n%2==0?(s(i[t][o+1]),s(i[t+1][o]),s(i[t][o])):(s(i[t][o+1]),s(i[t+1][o+1]),s(i[t+1][o]))}}function s(t){e.push(...t)}})(1,3,ut);console.log("data",t),V.setCanvas(a),V.setBackgroundColor([0,0,0,1]),V.setCamera(45,.1,1e3,[0,0,-8],[0,0,0],[0,1,0]),V.addMesh({attributes:t,uniforms:{color:[1,0,0]}}),V.addLight({type:"point",position:[0,3,-1],color:[1,1,1],intensity:.5}),V.addLight({type:"point",position:[2,0,-1],color:[1,1,1],intensity:.2}),s()})),t.$$.update=()=>{4&t.$$.dirty&&i&&i.forEach((t=>{t()})),2&t.$$.dirty&&console.log("lastProgramRendered",r)},[a,r,i,function(t){d[t?"unshift":"push"]((()=>{a=t,o(0,a)}))}]}class pt extends F{constructor(t){super(),E(this,t,mt,dt,i,{})}}export{pt as default};
